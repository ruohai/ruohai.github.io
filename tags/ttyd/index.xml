<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ttyd on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/ttyd/</link>
    <description>Recent content in ttyd on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Tue, 21 May 2024 20:47:37 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/ttyd/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨OpenWrtä¸Šå®‰è£…ttyd</title>
      <link>https://ruohai.wang/202405/ttyd-install-one-openwrt/</link>
      <pubDate>Tue, 21 May 2024 20:47:37 +0800</pubDate>
      
      <guid>https://ruohai.wang/202405/ttyd-install-one-openwrt/</guid>
      <description>å‰è¨€ ç®€å•äº¤ä»£ä¸€ä¸‹æˆ‘æƒ³è¦è·‘ttydçš„ç¡¬ä»¶å’Œç³»ç»Ÿã€‚
æˆ‘çš„ç¡¬ä»¶æ˜¯è¿…é›·èµšé’±å®ä¸€ä»£ï¼Œç¡¬ä»¶å‹å·ws1408ï¼Œ228MBçš„å†…å­˜ï¼Œamlogic s805èŠ¯ç‰‡ã€‚
æˆ‘ç»™è¿™ç¡¬ä»¶åˆ·çš„ç³»ç»Ÿæ˜¯openwrt21ï¼Œå†…æ ¸3.10ã€‚
å…¶å®openwrtçš„è½¯ä»¶ä»“åº“å°±å¸¦äº†luci-ttydï¼Œä½†æˆ‘è§‰å¾—ç”¨èµ·æ¥ä¸æ–¹ä¾¿ï¼Œè¦ç™»å½•openwrtâ€”â€”æœåŠ¡â€”â€”ttydï¼Œç„¶åäºŒæ¬¡ç™»å½•ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œluci-ttydçš„çª—å£å¤§å°ä¹Ÿå—é™åˆ¶ï¼Œæ²¡æ³•åšåˆ°æµè§ˆå™¨å…¨å±ã€‚
æ‰€ä»¥æœ€åè¿˜æ˜¯ç”¨äºŒè¿›åˆ¶åŒ…çš„æ–¹å¼åœ¨openwrtä¸Šå®‰è£…ä¸€éttydã€‚
å®‰è£… ç¬¬ä¸€æ­¥ï¼šä¸‹è½½
ttydçš„githubé¡¹ç›®ä¸»é¡µæŒ‡è·¯ï¼šã€tsl0922/ttydã€‘ï¼Œåœ¨releaseé¡µé¢æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„äºŒè¿›åˆ¶åŒ…ã€‚ws1408æ˜¯arm32/armhf/armv7lï¼Œä¸‰ç§å«æ³•éƒ½å¯¹ã€‚æˆ‘è¿™é‡Œé€‰æ‹©ttyd.armhfã€‚
wget -O ttyd https://github.com/tsl0922/ttyd/releases/download/1.7.7/ttyd.armhf æ³¨æ„çœ‹ä¸‹ä¸‹è½½çš„æ–‡ä»¶æ˜¯ä¸æ˜¯æœ‰å¯æ‰§è¡Œæƒé™ï¼Œæ²¡æœ‰çš„è¯chmod +x ttydèµ‹æƒã€‚
ç¬¬äºŒæ­¥ï¼šsysvè„šæœ¬
åœ¨/etc/init.dç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ttydï¼Œç„¶åç²˜è´´ä»¥ä¸‹ä»£ç ï¼Œç«¯å£å·å’Œæ–‡ä»¶è·¯å¾„è¯·è‡ªè¡Œè°ƒæ•´ï¼š
#!/bin/sh /etc/rc.common START=99 STOP=10 SERVICE_WRITE_PID=1 SERVICE_USE_PID=1 SERVICE_DAEMONIZE=1 start() { service_start /mnt/data/ttyd/ttyd -p 12345 -W login } stop() { kill $(pidof ttyd) } ä¿å­˜åé€€å‡ºï¼Œç„¶åç»™æ–‡ä»¶æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œchmod +x ttydã€‚
è¿™é‡Œæœ‰ä¸¤ä¸ªä¸ªæ³¨æ„ç‚¹ï¼Œç¬¬ä¸€æ˜¯ttydä»æŸä¸ªç‰ˆæœ¬ä»¥åé»˜è®¤æ˜¯åªè¯»æƒé™äº†ï¼Œå¯åŠ¨å‘½ä»¤éœ€è¦æ·»åŠ -Wå‚æ•°æ‰ä¼šæœ‰å†™å…¥æƒé™ã€‚ç¬¬äºŒæ˜¯æˆ‘è¿™ä¸ªè„šæœ¬åªé€‚é…äº†startå’Œstopå‘½ä»¤ï¼Œå…¶å®ƒçš„restartæ²¡åšé€‚é…ï¼Œæœ‰éœ€æ±‚çš„å¯ä»¥è‡ªå·±å‚è€ƒsysvinitçš„è¯­æ³•è¡¥è¶³ã€‚
ç¬¬ä¸‰æ­¥ï¼šttydå¯åŠ¨
çœ‹äº†è¿™ä¹ˆå¤šç¯‡åœ¨openwrtä¸Šè£…è½¯ä»¶çš„åšå®¢ï¼Œå¯åŠ¨å’Œæ·»åŠ å¯åŠ¨é¡¹å¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿç»ƒäº†ã€‚
# å¯åŠ¨ service ttyd start # æ·»åŠ å¯åŠ¨é¡¹ service ttyd enable å¥½äº†ï¼Œåˆ°è¿™é‡Œåœ¨openwrtä¸Šè¿è¡ŒttydäºŒè¿›åˆ¶åŒ…çš„æ“ä½œå°±å®Œæˆæƒ¹ã€‚
ğŸ‰</description>
    </item>
    
    <item>
      <title>ttydä½¿ç”¨Nginxå®ç°HTTPåŸºæœ¬è®¤è¯ï¼ˆHTTP Basic Authenticationï¼‰</title>
      <link>https://ruohai.wang/202402/ttyd-config-auth-proxy-with-nginx/</link>
      <pubDate>Wed, 28 Feb 2024 20:47:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202402/ttyd-config-auth-proxy-with-nginx/</guid>
      <description>å‰è¨€ ä¹‹å‰å†™è¿‡ä¸€ç¯‡åœ¨ç©å®¢äº‘ä¸Šå®‰è£…ttydçš„åšå®¢ï¼Œæ–‡ç« æŒ‡è·¯ï¼šã€åœ¨ç©å®¢äº‘ä¸Šå®‰è£…ttydã€‘ã€‚
ttydé»˜è®¤çš„è®¤è¯æ–¹æ³•æ˜¯åœ¨å¯åŠ¨å‘½ä»¤ä¸­ä½¿ç”¨-cå‚æ•°æ¥è®¾ç½®ç”¨æˆ·åå’Œå¯†ç ï¼Œä¸¾ä¾‹å¦‚ä¸‹
ttyd -c jacky:123456 bash è¿™æ ·ç¡®å®å¾ˆæ–¹ä¾¿å•Šï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½¿ç”¨htopæŸ¥çœ‹è¿›ç¨‹æ—¶ï¼Œä¼šå‘ç°ttydçš„è¿›ç¨‹æ˜¯æ˜æ–‡çš„ï¼Œä¹Ÿå°±æ˜¯è¿›ç¨‹ä¼šæ˜¾ç¤º
ttyd -c jacky:123456 bash ğŸ¤”ï¼Œä¸ç®¡è¿™ä¸ªç³»ç»Ÿæ˜¯ç‹¬è‡ªä½¿ç”¨è¿˜æ˜¯å¤šäººå…±ç”¨ï¼Œè¿™ç§å®Œå…¨æš´éœ²ç”¨æˆ·åå’Œå¯†ç çš„æ–¹å¼å®åœ¨æ˜¯è®©äººèº«å¿ƒä¸å®‰ã€‚
é‚£æœ‰æ²¡æœ‰å…¶å®ƒè®¤è¯çš„æ–¹æ³•ï¼Œæ¯”å¦‚æŠŠç”¨æˆ·å’Œå¯†ç ä¿¡æ¯ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œttydå¯åŠ¨å‘½ä»¤ä»æ–‡ä»¶ä¸­è¯»å–ç”¨æˆ·ä¿¡æ¯ã€‚
æŸ¥äº†é¡¹ç›®githubä¸»é¡µçš„issuesï¼Œå¾ˆå¤šå¹´å‰å°±æœ‰å¼€å‘è€…æäº¤äº†è¿™ä¸ªåŠŸèƒ½çš„ä»£ç ï¼Œä½†éƒ½è¢«ä½œè€…å…³é—­ã€é©³å›äº†ã€‚
æ—¢ç„¶ttydçš„å¼€å‘è€…å¦‚æ­¤å›ºæ‰§çš„æ‹’ç»åˆå¹¶è¿™ä¸ªåŠŸèƒ½çš„ä»£ç ï¼Œé‚£å°±çœ‹ä¸‹æ€ä¹ˆé€šè¿‡ä»–æ‰€è¯´çš„Auth Proxyæ¥å®ç°ã€‚
é…ç½® é¦–å…ˆè´´ä¸Šttydé¡¹ç›®wikiä¸­æä¾›çš„é…ç½®æ‰‹å†Œï¼šã€Auth Proxyã€‘
ç¬¬ä¸€æ­¥ï¼šttydå¯åŠ¨å‘½ä»¤è°ƒæ•´
ttydçš„å¯åŠ¨å‘½ä»¤ï¼Œä»ä¹‹å‰çš„
ttyd -c jacky:123456 bash è°ƒæ•´ä¸º
ttyd -i /tmp/ttyd.sock -H X-WEBAUTH-USER bash è°ƒæ•´åå®Œæ•´ç‰ˆçš„ttyd.serviceé…ç½®å¦‚ä¸‹
[Unit] Description=TTYD After=syslog.target After=network.target [Service] User=[user] ExecStart=/opt/ttyd/ttyd.armhf -p 12345 -i /tmp/ttyd.sock -H X-WEBAUTH-USER -W bash Type=simple Restart=always [Install] WantedBy=multi-user.target ç¬¬äºŒæ­¥ï¼šnginxé…ç½®
å…ˆå®‰è£…nginxè¿™ä¸ªä¸å¤šè¯´äº†ã€‚æ ¹æ®wikiä¸­ç»™å‡ºçš„nginxé…ç½®ï¼Œå®Œæ•´ç‰ˆæœ¬å¦‚ä¸‹ï¼Œæ³¨æ„è°ƒæ•´ç›‘å¬çš„ç«¯å£å·ã€‚
server { listen 12345; server_name ttyd; location / { auth_basic &amp;#34;ttyd&amp;#34;; auth_basic_user_file &amp;#34;/etc/nginx/htpasswd/ttyd&amp;#34;; proxy_set_header X-WEBAUTH-USER $remote_user; proxy_set_header Authorization &amp;#34;&amp;#34;; proxy_http_version 1.</description>
    </item>
    
    <item>
      <title>Linuxä¸‹ç”¨Nginxç»™ttydè®¾ç½®SSLå¼€å¯HTTPSè®¿é—®</title>
      <link>https://ruohai.wang/202307/ttyd-update-to-https/</link>
      <pubDate>Sun, 16 Jul 2023 01:17:58 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/ttyd-update-to-https/</guid>
      <description>ç”¨nginxç»™ttydå®ç°httpsè®¿é—®ï¼Œ99%çš„è®¾ç½®éƒ½å’Œã€Linuxä¸‹ç”¨Nginxç»™File Browserè®¾ç½®SSLå¼€å¯HTTPSè®¿é—®ã€‘ä¸€æ ·ï¼Œç›´æ¥ç…§æ¬å³å¯ã€‚ä½†å¦‚æœå®Œå…¨ç…§æ¬ï¼Œä¼šå‘ç°httpsä¸‹ç™»å½•ttydä»¥åï¼Œé¡µé¢å…¨é»‘ï¼Œæœ‰ä¸€ä¸ªæµ®çª—æ˜¾ç¤ºã€press enter to reconnectã€‘ï¼Œæ²¡æœ‰å…‰æ ‡ï¼Œä¹Ÿæ²¡æœ‰å‘½ä»¤æç¤ºç¬¦ã€‚
å¾ˆå®¹æ˜“å°±æ˜ç™½å‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºttydä½¿ç”¨çš„æ˜¯websocketåè®®ï¼Œé€šè¿‡nginxä»£ç†è½¬å‘ä»¥åå‡ºç°äº†bugã€‚
ç½‘ä¸Šæœäº†ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼Œæ ¹æ®ã€è¿™ä¸ªé¡µé¢ã€‘å’Œã€è¿™ä¸ªé¡µé¢ã€‘ä¸Šçš„ä¸¤ä¸ªè§£ç­”ï¼Œéœ€è¦å¯¹nginxçš„é…ç½®å†…å®¹ç¨å¾®ä¿®æ”¹ã€‚
æ³¨æ„ è®¾å®šåŸŸåä¸ºï¼šjackiechang.cn è®¾å®šå¤–ç½‘ç«¯å£ä¸ºï¼š11111 è®¾å®šå†…ç½‘ç«¯å£ä¸ºï¼š4533 é…ç½®æ–‡ä»¶ server {listen [::]:11111 ssl;server_name jackiechang.cn;ssl_certificate ssl/jackiechang.cn.pem;ssl_certificate_key ssl/jackiechang.cn.key;ssl_session_cache shared:SSL:1m;ssl_session_timeout 5m;ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;ssl_prefer_server_ciphers on;error_page 497 https://$host:$server_port$uri$is_args$args;location / {proxy_set_header Host $host;proxy_set_header X-Forwarded-Proto $scheme;proxy_set_header X-Forwarded-Port $server_port;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;proxy_set_header Upgrade $http_upgrade;proxy_set_header Connection &amp;#34;upgrade&amp;#34;;proxy_http_version 1.1;proxy_pass http://localhost:4533;}} </description>
    </item>
    
    <item>
      <title>Linuxä¸‹ttydä½¿ç”¨Gitæç¤ºAuthor identity unknownå’Œfatal: $HOME not seté—®é¢˜çš„è§£å†³</title>
      <link>https://ruohai.wang/202307/git-home-not-set-bugfix/</link>
      <pubDate>Sat, 15 Jul 2023 17:50:39 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/git-home-not-set-bugfix/</guid>
      <description>æˆ‘åœ¨ttydä¸‹ä½¿ç”¨git commit -m &#39;xxx&#39;å‘½ä»¤æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªæ— æ³•è¯†åˆ«gitç”¨æˆ·ä¿¡æ¯çš„é”™è¯¯ã€‚
å…·ä½“æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š
Author identity unknown *** Please tell me who you are. Run git config --global user.email &amp;#34;you@example.com&amp;#34; git config --global user.name &amp;#34;Your Name&amp;#34; to set your account&amp;#39;s default identity. Omit --global to set the identity only in this repository. fatal: unable to auto-detect email address (got &amp;#39;user@hostname.(none)&amp;#39;) æ„æ€å°±æ˜¯gitçš„ç”¨æˆ·èº«ä»½è®¤è¯ä¿¡æ¯æœªçŸ¥ï¼Œéœ€è¦ç”¨git config --globalè¿›è¡Œé…ç½®ã€‚ä½†æˆ‘å·²ç»åœ¨ç³»ç»Ÿä¸­é…ç½®äº†git username&amp;amp;emailï¼Œåœ¨æœ¬åœ°ç»ˆç«¯ä¸­ä½¿ç”¨éƒ½æ­£å¸¸ï¼Œä»…åœ¨ttydä¸­å‡ºç°äº†è¿™ä¸ªbugã€‚
é‚£æ—¢ç„¶éƒ½æç¤ºè¦è®¾ç½®äº†ï¼Œå°±å…ˆgit config --globalè®¾ç½®ä¸€ä¸‹ï¼Œè¿™æ—¶åˆå‡ºç°äº†ç¬¬äºŒä¸ªæŠ¥é”™ã€‚
fatal: $HOME not set åˆ°è¿™é‡ŒåŸºæœ¬å°±æ˜ç™½é”™è¯¯åŸå› äº†ï¼Œttydä¸‹gitæ— æ³•è¯†åˆ«$HOMEç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æ— æ³•è¯»å–åˆ°~/.gitconfigæ–‡ä»¶å†…é…ç½®çš„username&amp;amp;emailä¿¡æ¯ã€‚
è§£å†³æ–¹æ¡ˆ æ ¹æ®è¿™ä¸ªæŠ¥é”™æœäº†ä¸€ä¸‹è§£å†³æ–¹æ¡ˆï¼Œæ ¹æ®ã€stackoverflowä¸Šçš„è¿™ä¸ªå¸–å­ã€‘ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯ç”¨git config --systemæ¥è®¾å®šgitç”¨æˆ·ä¿¡æ¯
git config --system user.</description>
    </item>
    
    <item>
      <title>ttydåŸºç¡€ä½¿ç”¨ä¹‹ï¼šåœ¨debianä¸Šå®‰è£…ttyd</title>
      <link>https://ruohai.wang/202307/install-ttyd/</link>
      <pubDate>Sat, 15 Jul 2023 16:38:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/install-ttyd/</guid>
      <description>å‰è¨€ ttydï¼Œè½»é‡å¥½ç”¨çš„ä¸€ä¸ªweb terminalï¼Œç‰¹åˆ«é€‚åˆå‡ºé—¨åœ¨å¤–æ²¡æœ‰å¸¦è‡ªå·±ç”µè„‘ä½†åˆéœ€è¦è®¿é—®è‡ªå·±vpsè¿›è¡Œæ“ä½œçš„åœºæ™¯ï¼Œåªéœ€è¦æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®é…ç½®å¥½çš„ttydå°±OKã€‚
githubé¡¹ç›®æŒ‡è·¯ï¼šã€ttyd - Share your terminal over the webã€‘
ç®€å•è®°å½•ä¸‹å®‰è£…è¿‡ç¨‹ã€‚
å®‰è£… è¿™æ¬¡å®‰è£…ttydçš„æœºå™¨æ˜¯åˆ·äº†armbiançš„ç©å®¢äº‘ï¼ˆws1608ï¼‰ï¼Œç¡¬ä»¶æ¶æ„æ˜¯arm32/armv7l/armhfã€‚
ç¬¬ä¸€æ­¥ï¼šä¸‹è½½å®‰è£…åŒ…
ç¬¬ä¸€æ­¥å°±æ˜¯åˆ›å»ºå®‰è£…ç›®å½•ã€ä¸‹è½½å®‰è£…åŒ…åŸºç¡€æ“ä½œã€‚æ³¨æ„ä¸‹è½½äºŒè¿›åˆ¶åŒ…çš„æ—¶å€™é€‰æ‹©é€‚é…è‡ªå·±ç¡¬ä»¶æ¶æ„çš„ç‰ˆæœ¬ï¼Œè¿™é‡Œç©å®¢äº‘éœ€è¦é€‰æ‹©ttyd.armhfã€‚
sudo mkdir -p /op/ttyd ; cd $_ sudo wget https://github.com/tsl0922/ttyd/releases/download/1.7.7/ttyd.armhf ç¬¬äºŒæ­¥ï¼šæ·»åŠ å¯æ‰§è¡Œæƒé™
ä¸‹è½½çš„äºŒè¿›åˆ¶åŒ…é»˜è®¤æ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œéœ€è¦æˆæƒ
sudo chmod +x ttyd.armhf ç¬¬ä¸‰æ­¥ï¼šæŸ¥çœ‹å­¦ä¹ æ‰‹å†Œ
å…ˆå­¦ä¹ ä¸€ä¸‹ttydçš„æ‰‹å†Œï¼Œæœ‰å‡ ä¸ªå‚æ•°åé¢éœ€è¦ç”¨åˆ°
-pï¼ŒæŒ‡å®šç«¯å£ï¼Œé»˜è®¤æ˜¯7681 -cï¼Œè®¾å®šè®¤è¯ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è´¦æˆ·å’Œå¯†ç ï¼Œæ ¼å¼æ˜¯username:password -Wï¼Œè®¾å®šå†™æƒé™ã€‚é»˜è®¤åªè¯»ï¼Œå¦‚æœè¦å†™æƒé™éœ€è¦åŠ ä¸Šè¿™ä¸ªå‚æ•° -6ï¼Œå¼€å¯æ”¯æŒipv6ï¼Œå¦‚æœé€šè¿‡ipv6 + ddnsè¿›è¡Œè®¿é—®çš„å®¶å®½ç”¨æˆ·å¯ä»¥æ·»åŠ è¿™ä¸ªå‚æ•° ç¬¬å››æ­¥ï¼šåˆ›å»ºsystemdæœåŠ¡é…ç½®æ–‡ä»¶
è¦æŠŠttydæ·»åŠ åˆ°systemdæœåŠ¡ï¼Œåœ¨/etc/systemd/systemç›®å½•ä¸‹åˆ›å»ºttyd.serviceçš„é…ç½®æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹
[Unit] Description=TTYD After=syslog.target After=network.target [Service] ExecStart=/opt/ttyd/ttyd.armhf login Type=simple Restart=always User=root Group=root [Install] WantedBy=multi-user.target ä»¥ä¸Šæ˜¯ttydå®˜æ–¹wikiä¸­æä¾›çš„æ¨¡æ¿ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ä¸ªæ€§éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚æ¯”å¦‚è‡ªå®šä¹‰ç«¯å£å·ã€å¼€å¯ipv6æ”¯æŒã€æ·»åŠ ç”¨æˆ·è®¤è¯ã€å¢åŠ å†™æƒé™ã€æŒ‡å®šbash shellã€ä»¥non-rootç”¨æˆ·è¿è¡Œï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š
[Unit] Description=TTYD After=syslog.target After=network.target [Service] ExecStart=/opt/ttyd/ttyd.armhf -p 54321 -c jack:123456 -W -6 bash Type=simple Restart=always User=jack Group=jack [Install] WantedBy=multi-user.</description>
    </item>
    
  </channel>
</rss>
