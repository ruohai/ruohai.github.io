<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Docker on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/docker/</link>
    <description>Recent content in Docker on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Fri, 06 Sep 2024 00:33:53 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/docker/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ç”¨Dockeræ–¹å¼éƒ¨ç½²è½»é‡RSSé˜…è¯»å™¨Miniflux</title>
      <link>https://ruohai.wang/202409/miniflux-install-guide/</link>
      <pubDate>Fri, 06 Sep 2024 00:33:53 +0800</pubDate>
      
      <guid>https://ruohai.wang/202409/miniflux-install-guide/</guid>
      <description>å‰è¨€ æœ€è¿‘å‡†å¤‡è‡ªå»ºä¸€ä¸ªrssé˜…è¯»å™¨ï¼ˆè¢«äº’è”ç½‘å¤§å‚çš„ç½‘ç»œæœåŠ¡èƒŒåˆºè¿‡å‡ æ¬¡ä»¥åï¼Œæˆ‘å·²ç»å€¾å‘äºèƒ½è‡ªå»ºçš„æœåŠ¡éƒ½è‡ªå»ºï¼‰ã€‚
ä¸Šä¸€æ¬¡ä½¿ç”¨rssé˜…è¯»å™¨å¯èƒ½è¿˜å¾—è¿½æº¯åˆ°10å¤šå¹´å‰çš„google readerï¼Œè‡ªä»googleçªç„¶å®£å¸ƒå…³é—­readeræœåŠ¡ä»¥åï¼Œæˆ‘ä¹Ÿå°±åœ¨æ²¡æœ‰ç”¨è¿‡rssé˜…è¯»å™¨ã€‚è€Œä¸”è¿™äº›å¹´çš„äº’è”ç½‘å‘å±•è¶‹åŠ¿ï¼Œç¡®å®æ˜¯ä»å¼€æ”¾èµ°å‘å°é—­ï¼Œåšå®¢ç”±ç››è€Œè¡°ï¼Œå†…å®¹ç¤¾åŒºä¹Ÿæ˜¯å¾€å¾€æ˜¯é™åˆ¶å¿…é¡»æ³¨å†Œç™»å½•åå†…å®¹å¯è§ï¼Œæ›´æœ‰ç”šè€…ç”šè‡³éƒ½ä¸å¯¹æœç´¢å¼•æ“å¼€æ”¾æ”¶å½•ï¼Œå¤§æç§åŸŸæµé‡ã€‚
å›åˆ°æ­£é¢˜ï¼Œè¿™æ¬¡æ˜¯è¦è‡ªå»ºä¸€ä¸ªrssé˜…è¯»å™¨æœåŠ¡ã€‚é¦–å…ˆæ˜¯äº†è§£äº†ä»¥ä¸‹ç°åœ¨å¯é€‰çš„è‡ªå»ºrssé˜…è¯»èµ·æœåŠ¡æœ‰å“ªäº›ã€‚è¿™é‡Œçœ‹åˆ°ã€è¿™ç¯‡åšå®¢ã€‘æ•´ç†çš„è¡¨æ ¼ã€‚
æˆ‘æœ€åé€‰æ‹©çš„æ˜¯minifluxæœ‰ä¸¤ä¸ªåŸå› ï¼Œå…¶ä¸€æ˜¯è€ƒè™‘åˆ°èµ„æºå ç”¨ï¼Œå› ä¸ºæˆ‘å¯èƒ½éœ€è¦æŠŠæœåŠ¡éƒ¨ç½²åˆ°æ€§èƒ½å­±å¼±çš„armç›’å­ä¸Šï¼Œå…¶äºŒæ˜¯å‰ä¸¤ä¸ªæœåŠ¡ç”¨çš„éƒ½æ˜¯phpæ–¹æ¡ˆï¼Œæˆ‘å¯¹phpä¸ç†Ÿï¼Œè™½ç„¶éƒ½æ”¯æŒdockerä¸€é”®éƒ¨ç½²ï¼Œä½†è€ƒè™‘åˆ°å¦‚æœåŸç”Ÿéƒ¨ç½²ï¼Œminifluxåªéœ€è¦ä¸€ä¸ªé¢„ç¼–è¯‘çš„goäºŒè¿›åˆ¶åŒ…å°±è¡Œäº†ã€‚
éƒ¨ç½² minifluxå®˜æ–¹çš„æ–‡æ¡£æä¾›äº†éƒ¨ç½²æ•™ç¨‹ï¼Œè‹±è¯­é˜…è¯»æ²¡æœ‰éšœç¢çš„è¯å¯ä»¥ç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚
æˆ‘é€‰æ‹©äº†docker-composeéƒ¨ç½²ï¼Œæ‰€ä»¥éå¸¸ç®€å•ï¼Œåªéœ€è¦å‡†å¤‡ä¸€ä»½docker-compose.ymlæ–‡ä»¶å³å¯ã€‚minifluxå®˜æ–¹æ–‡æ¡£é‡Œå·²ç»æä¾›äº†docker-compose.ymlçš„æ¨¡æ¿ï¼Œåªéœ€è¦æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´ä¸€äº›é…ç½®å³å¯ã€‚
ä»¥ä¸‹æ˜¯å®˜ç½‘æ¨¡æ¿åœ¨2024/09/06æä¾›çš„æ¨¡æ¿ï¼Œæ¨¡æ¿å…·æœ‰æ—¶æ•ˆæ€§ï¼Œè¯·ç•™æ„å®˜ç½‘æ¨¡æ¿å¯èƒ½ä¼šæœ‰æ›´æ–°å˜åŠ¨ã€‚
services: miniflux: image: miniflux/miniflux:latest ports: - &amp;#34;80:8080&amp;#34; depends_on: db: condition: service_healthy environment: - DATABASE_URL=postgres://miniflux:secret@db/miniflux?sslmode=disable - RUN_MIGRATIONS=1 - CREATE_ADMIN=1 - ADMIN_USERNAME=admin - ADMIN_PASSWORD=test123 db: image: postgres:15 environment: - POSTGRES_USER=miniflux - POSTGRES_PASSWORD=secret - POSTGRES_DB=miniflux volumes: - miniflux-db:/var/lib/postgresql/data healthcheck: test: [&amp;#34;CMD&amp;#34;, &amp;#34;pg_isready&amp;#34;, &amp;#34;-U&amp;#34;, &amp;#34;miniflux&amp;#34;] interval: 10s start_period: 30s volumes: miniflux-db: ä»ymlæ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°éœ€è¦å®‰è£…ä¸¤ä¸ªæœåŠ¡ï¼Œä¸€ä¸ªæ˜¯minifluxæœ¬ä½“ï¼Œå¦ä¸€ä¸ªæ˜¯æ•°æ®åº“postgresã€‚å®æµ‹amd64ç‰ˆæœ¬çš„ä¸¤ä¸ªæœåŠ¡çš„é•œåƒå ç”¨å¤§æ¦‚500MBçš„å­˜å‚¨ç©ºé—´ã€‚
æ ¹æ®è‡ªå·±çš„éœ€æ±‚ï¼Œæˆ‘å¯¹é…ç½®æ¨¡æ¿åšäº†ç®€å•è°ƒæ•´ï¼Œè°ƒæ•´çš„å†…å®¹åšäº†æ³¨é‡Š
services: miniflux: image: miniflux/miniflux:latest container_name: miniflux # æŒ‡å®šå®¹å™¨åç§° user: 1000:1000 # è¿™é‡ŒæŒ‡å®šç”¨érootè´¦æˆ·è¿è¡Œå®¹å™¨ restart: always # å¢åŠ é‡å¯ç­–ç•¥ ports: - &amp;#34;80:8080&amp;#34; # æŒ‡å®šç«¯å£ä»¥åè®°å¾—é˜²ç«å¢™æ”¾è¡Œ depends_on: db: condition: service_healthy environment: - DATABASE_URL=postgres://miniflux:123456@db/miniflux?</description>
    </item>
    
    <item>
      <title>æ‹‰ä¸åŠ¨é•œåƒï¼Ÿç»™Dockeré…ç½®ä»£ç†æœåŠ¡å™¨</title>
      <link>https://ruohai.wang/202406/docker-config-to-use-proxy-server/</link>
      <pubDate>Fri, 21 Jun 2024 19:57:04 +0800</pubDate>
      
      <guid>https://ruohai.wang/202406/docker-config-to-use-proxy-server/</guid>
      <description>å·²ç»å†™äº†ä¸¤ç¯‡æ–‡ç« è®°å½•æ€ä¹ˆåœ¨debianå’Œopenwrtä¸Šå®‰è£…å’Œä½¿ç”¨v2rayaï¼Œé¡ºä¾¿å†æ°´ä¸€ç¯‡æ–‡ç« è®°å½•ä¸‹æ€ä¹ˆç»™dockeré…ç½®ä»£ç†æœåŠ¡å™¨ã€‚
dockerå®˜ç½‘æä¾›äº†ç®€å•ç›´ç™½çš„è‹±æ–‡æ–‡æ¡£ï¼Œå¦‚æœè‹±æ–‡é˜…è¯»æ— éšœç¢çš„è¯å¯ä»¥ç›´æ¥çœ‹åŸæ–‡ï¼šã€Configure the daemon with systemdã€‘
æ³¨æ„ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªå‰æï¼Œå°±æ˜¯dockerçš„éƒ¨ç½²ç¯å¢ƒä½¿ç”¨çš„æ˜¯systemdï¼Œè€Œä¸æ˜¯sysv initæˆ–è€…openrcä¹‹ç±»ã€‚
æ–¹æ³•ä¸€ï¼šç¼–è¾‘daemon.json
æ³¨æ„ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦è‡ªå·±çš„docker engineç‰ˆæœ¬å¤§äº23.0ï¼Œä½äºè¿™ä¸ªç‰ˆæœ¬å·åªèƒ½ç”¨æ–¹æ³•äºŒã€‚
å¯ä»¥ç”¨docker versionå‘½ä»¤æŸ¥çœ‹è‡ªå·±æœºå™¨ä¸Šçš„dockerç‰ˆæœ¬å·ã€‚
åœ¨/etc/dockerç›®å½•ä¸‹æ–°å»ºdaemon.jsonæ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä»¥ä¸‹å†…å®¹çš„æ ¼å¼å½•å…¥è‡ªå·±çš„ä»£ç†æœåŠ¡å™¨ä¿¡æ¯ã€‚
{ &amp;#34;proxies&amp;#34;: { &amp;#34;http-proxy&amp;#34;: &amp;#34;http://proxy.example.com:3128&amp;#34;, &amp;#34;https-proxy&amp;#34;: &amp;#34;https://proxy.example.com:3129&amp;#34;, &amp;#34;no-proxy&amp;#34;: &amp;#34;*.test.example.com,.example.org,127.0.0.0/8&amp;#34; } } æ–¹æ³•äºŒï¼šç¼–è¾‘docker.service
å¦‚æœdocker engineç‰ˆæœ¬ä½äº23.0ï¼Œæˆ–è€…ä¸Šé¢çš„é…ç½®æ²¡æœ‰æ•ˆæœï¼Œå¯ä»¥ç”¨æ–¹æ³•äºŒã€‚
å…ˆåˆ›å»ºç›®å½•å’Œæ–‡ä»¶
mkdir -p /etc/systemd/system/docker.service.d touch /etc/systemd/system/docker.service.d/http-proxy.conf ç„¶åç¼–è¾‘http-proxy.confæ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä»¥ä¸‹å†…å®¹çš„æ ¼å¼å½•å…¥è‡ªå·±çš„ä»£ç†æœåŠ¡å™¨ä¿¡æ¯ã€‚
[Service] Environment=&amp;#34;HTTP_PROXY=http://proxy.example.com:3128&amp;#34; Environment=&amp;#34;HTTPS_PROXY=https://proxy.example.com:3129&amp;#34; Environment=&amp;#34;NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp&amp;#34; æœ€åä¸€æ­¥
å®Œæˆäº†æ–¹æ³•ä¸€æˆ–è€…æ–¹æ³•äºŒçš„ç¼–è¾‘ä»¥åï¼Œé‡å¯dockerã€‚
systemctl daemon-reload &amp;amp;&amp;amp; systemctl restart docker.service æŸ¥çœ‹å˜æ›´æ˜¯å¦ç”Ÿæ•ˆï¼Œå¯ä»¥ç”¨å‘½ä»¤docker info
ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤systemctl show --property=Environment docker
å¥½äº†ï¼Œåˆ°è¿™é‡Œç»™dockeré…ç½®ä»£ç†æœåŠ¡å™¨å°±å®Œæˆäº†ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒdocker pullæ‹‰ä¸åŠ¨é•œåƒæƒ¹ã€‚
ğŸ‰
å–æ¯å¥¶èŒ¶ </description>
    </item>
    
    <item>
      <title>UFWé˜²ç«å¢™å¯¹Dockerå®¹å™¨ä¸ç”Ÿæ•ˆçš„é—®é¢˜è§£å†³</title>
      <link>https://ruohai.wang/202310/ufw-solve-conflict-with-docker/</link>
      <pubDate>Fri, 06 Oct 2023 19:35:41 +0800</pubDate>
      
      <guid>https://ruohai.wang/202310/ufw-solve-conflict-with-docker/</guid>
      <description>åœ¨debianä¸‹ç”¨dockeréƒ¨ç½²çš„æ–¹å¼å®‰è£…äº†immichï¼Œé»˜è®¤ç«¯å£2283ã€‚
ä¸ºäº†å®‰å…¨ï¼Œè‚¯å®šä¸ä¼šç”¨é»˜è®¤ç«¯å£ã€‚éƒ¨ç½²å®Œimmichç®€å•è°ƒè¯•æ²¡é—®é¢˜ä»¥åï¼Œå°±å¼€å§‹å®‰è£…ufwç®¡ç†ç«¯å£ã€‚
ä½†å®æµ‹å‘ç°ufwæœªå¼€å¯2283ç«¯å£çš„æƒ…å†µï¼Œimmichçš„webæœåŠ¡ä¾ç„¶å¯ä»¥è®¿é—®ï¼Œä¹Ÿå°±æ˜¯ufwå¯¹dockeræœåŠ¡ä¸ç”Ÿæ•ˆã€‚
æ‰¾äº†ä¸‹è§£å†³æ–¹æ¡ˆã€‚
åœ¨/etc/dockerç›®å½•ä¸‹æ–°å»ºdaemon.jsonï¼Œæ·»åŠ é…ç½®é¡¹ï¼š
{ &amp;#34;iptables&amp;#34;: false } ä¿å­˜é€€å‡ºã€‚
# é‡è½½ systemctl daemon-reload # é‡å¯docker systemctl restart docker # é‡å¯ufw systemctl restart ufw å› ä¸ºufwå’Œdockeréƒ½ä¼šæ“ä½œiptablesï¼Œè¿™ä¸ªæ–¹æ¡ˆé€‰æ‹©ç¦æ‰dockerï¼Œä»¥ufwä¸ºå‡†ã€‚
å‚è€ƒæ–‡ç«  Docker å’Œ UFW ä¸€èµ·ç”¨å¯èƒ½ä¼šå‡ºç°é—®é¢˜ https://zhuanlan.zhihu.com/p/628899663 </description>
    </item>
    
    <item>
      <title>Linuxä¸‹å®‰è£…Docker Engine</title>
      <link>https://ruohai.wang/202307/install-docker-engine/</link>
      <pubDate>Fri, 14 Jul 2023 23:20:11 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/install-docker-engine/</guid>
      <description>åœ¨linuxä¸Šå®‰è£…dockerï¼Œå®˜æ–¹æœ‰è¯¦ç»†çš„æ•™ç¨‹æŒ‡å¯¼å¦‚ä½•å®‰è£…ã€‚ä½†å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ç”¨çš„linuxå‘è¡Œç‰ˆæ˜¯debianä»¥åŠdebiançš„è¡ç”Ÿå‘è¡Œç‰ˆï¼Œå¯ä»¥ç›´æ¥ç”¨debianå®˜æ–¹ç»´æŠ¤çš„docker.ioã€‚
apt install docker.io dockerå®˜æ–¹æŠŠdocker.ioç§°ä¸ºunofficial packageséå®˜æ–¹çš„ç‰ˆæœ¬ã€‚
å› ä¸ºdocker.ioæ˜¯debianåœ¨ç»´æŠ¤è€Œä¸æ˜¯dockerå®˜æ–¹ï¼Œè€Œä¸”2019å¹´çš„æ—¶å€™æ›¾ç»åœæ­¢ç»´æŠ¤äº†1å¹´å¯¼è‡´ç‰ˆæœ¬è½åå¤ªå¤šã€‚ä½†ç°åœ¨ä¸ç”¨æ‹…å¿ƒdocker.ioç‰ˆæœ¬é—®é¢˜ï¼Œç›®å‰ä»“åº“é‡Œå·²ç»æ˜¯20.10.24ã€‚</description>
    </item>
    
  </channel>
</rss>
