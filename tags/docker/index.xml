<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Docker on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/docker/</link>
    <description>Recent content in Docker on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Fri, 21 Jun 2024 19:57:04 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/docker/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>æ‹‰ä¸åŠ¨é•œåƒï¼Ÿç»™Dockeré…ç½®ä»£ç†æœåŠ¡å™¨</title>
      <link>https://ruohai.wang/202406/docker-config-to-use-proxy-server/</link>
      <pubDate>Fri, 21 Jun 2024 19:57:04 +0800</pubDate>
      
      <guid>https://ruohai.wang/202406/docker-config-to-use-proxy-server/</guid>
      <description>å·²ç»å†™äº†ä¸¤ç¯‡æ–‡ç« è®°å½•æ€ä¹ˆåœ¨debianå’Œopenwrtä¸Šå®‰è£…å’Œä½¿ç”¨v2rayaï¼Œé¡ºä¾¿å†æ°´ä¸€ç¯‡æ–‡ç« è®°å½•ä¸‹æ€ä¹ˆç»™dockeré…ç½®ä»£ç†æœåŠ¡å™¨ã€‚
dockerå®˜ç½‘æä¾›äº†ç®€å•ç›´ç™½çš„è‹±æ–‡æ–‡æ¡£ï¼Œå¦‚æœè‹±æ–‡é˜…è¯»æ— éšœç¢çš„è¯å¯ä»¥ç›´æ¥çœ‹åŸæ–‡ï¼šã€Configure the daemon with systemdã€‘
æ³¨æ„ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•æœ‰ä¸ªå‰æï¼Œå°±æ˜¯dockerçš„éƒ¨ç½²ç¯å¢ƒä½¿ç”¨çš„æ˜¯systemdï¼Œè€Œä¸æ˜¯sysv initæˆ–è€…openrcä¹‹ç±»ã€‚
æ–¹æ³•ä¸€ï¼šç¼–è¾‘daemon.json
æ³¨æ„ä½¿ç”¨è¿™ä¸ªæ–¹æ³•éœ€è¦è‡ªå·±çš„docker engineç‰ˆæœ¬å¤§äº23.0ï¼Œä½äºè¿™ä¸ªç‰ˆæœ¬å·åªèƒ½ç”¨æ–¹æ³•äºŒã€‚
å¯ä»¥ç”¨docker versionå‘½ä»¤æŸ¥çœ‹è‡ªå·±æœºå™¨ä¸Šçš„dockerç‰ˆæœ¬å·ã€‚
åœ¨/etc/dockerç›®å½•ä¸‹æ–°å»ºdaemon.jsonæ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä»¥ä¸‹å†…å®¹çš„æ ¼å¼å½•å…¥è‡ªå·±çš„ä»£ç†æœåŠ¡å™¨ä¿¡æ¯ã€‚
{ &amp;#34;proxies&amp;#34;: { &amp;#34;http-proxy&amp;#34;: &amp;#34;http://proxy.example.com:3128&amp;#34;, &amp;#34;https-proxy&amp;#34;: &amp;#34;https://proxy.example.com:3129&amp;#34;, &amp;#34;no-proxy&amp;#34;: &amp;#34;*.test.example.com,.example.org,127.0.0.0/8&amp;#34; } } æ–¹æ³•äºŒï¼šç¼–è¾‘docker.service
å¦‚æœdocker engineç‰ˆæœ¬ä½äº23.0ï¼Œæˆ–è€…ä¸Šé¢çš„é…ç½®æ²¡æœ‰æ•ˆæœï¼Œå¯ä»¥ç”¨æ–¹æ³•äºŒã€‚
å…ˆåˆ›å»ºç›®å½•å’Œæ–‡ä»¶
mkdir -p /etc/systemd/system/docker.service.d touch /etc/systemd/system/docker.service.d/http-proxy.conf ç„¶åç¼–è¾‘http-proxy.confæ–‡ä»¶ï¼Œç„¶åæ ¹æ®ä»¥ä¸‹å†…å®¹çš„æ ¼å¼å½•å…¥è‡ªå·±çš„ä»£ç†æœåŠ¡å™¨ä¿¡æ¯ã€‚
[Service] Environment=&amp;#34;HTTP_PROXY=http://proxy.example.com:3128&amp;#34; Environment=&amp;#34;HTTPS_PROXY=https://proxy.example.com:3129&amp;#34; Environment=&amp;#34;NO_PROXY=localhost,127.0.0.1,docker-registry.example.com,.corp&amp;#34; æœ€åä¸€æ­¥
å®Œæˆäº†æ–¹æ³•ä¸€æˆ–è€…æ–¹æ³•äºŒçš„ç¼–è¾‘ä»¥åï¼Œé‡å¯dockerã€‚
systemctl daemon-reload &amp;amp;&amp;amp; systemctl restart docker.service æŸ¥çœ‹å˜æ›´æ˜¯å¦ç”Ÿæ•ˆï¼Œå¯ä»¥ç”¨å‘½ä»¤docker info
ä¹Ÿå¯ä»¥ç”¨å‘½ä»¤systemctl show --property=Environment docker
å¥½äº†ï¼Œåˆ°è¿™é‡Œç»™dockeré…ç½®ä»£ç†æœåŠ¡å™¨å°±å®Œæˆäº†ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒdocker pullæ‹‰ä¸åŠ¨é•œåƒæƒ¹ã€‚
ğŸ‰</description>
    </item>
    
    <item>
      <title>UFWé˜²ç«å¢™å¯¹Dockerå®¹å™¨ä¸ç”Ÿæ•ˆçš„é—®é¢˜è§£å†³</title>
      <link>https://ruohai.wang/202310/ufw-solve-conflict-with-docker/</link>
      <pubDate>Fri, 06 Oct 2023 19:35:41 +0800</pubDate>
      
      <guid>https://ruohai.wang/202310/ufw-solve-conflict-with-docker/</guid>
      <description>åœ¨debianä¸‹ç”¨dockeréƒ¨ç½²çš„æ–¹å¼å®‰è£…äº†immichï¼Œé»˜è®¤ç«¯å£2283ã€‚
ä¸ºäº†å®‰å…¨ï¼Œè‚¯å®šä¸ä¼šç”¨é»˜è®¤ç«¯å£ã€‚éƒ¨ç½²å®Œimmichç®€å•è°ƒè¯•æ²¡é—®é¢˜ä»¥åï¼Œå°±å¼€å§‹å®‰è£…ufwç®¡ç†ç«¯å£ã€‚
ä½†å®æµ‹å‘ç°ufwæœªå¼€å¯2283ç«¯å£çš„æƒ…å†µï¼Œimmichçš„webæœåŠ¡ä¾ç„¶å¯ä»¥è®¿é—®ï¼Œä¹Ÿå°±æ˜¯ufwå¯¹dockeræœåŠ¡ä¸ç”Ÿæ•ˆã€‚
æ‰¾äº†ä¸‹è§£å†³æ–¹æ¡ˆã€‚
åœ¨/etc/dockerç›®å½•ä¸‹æ–°å»ºdaemon.jsonï¼Œæ·»åŠ é…ç½®é¡¹ï¼š
{ &amp;#34;iptables&amp;#34;: false } ä¿å­˜é€€å‡ºã€‚
# é‡è½½ systemctl daemon-reload # é‡å¯docker systemctl restart docker # é‡å¯ufw systemctl restart ufw å› ä¸ºufwå’Œdockeréƒ½ä¼šæ“ä½œiptablesï¼Œè¿™ä¸ªæ–¹æ¡ˆé€‰æ‹©ç¦æ‰dockerï¼Œä»¥ufwä¸ºå‡†ã€‚
å‚è€ƒæ–‡ç«  Docker å’Œ UFW ä¸€èµ·ç”¨å¯èƒ½ä¼šå‡ºç°é—®é¢˜ https://zhuanlan.zhihu.com/p/628899663 </description>
    </item>
    
    <item>
      <title>Linuxä¸‹å®‰è£…Docker Engine</title>
      <link>https://ruohai.wang/202307/install-docker-engine/</link>
      <pubDate>Fri, 14 Jul 2023 23:20:11 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/install-docker-engine/</guid>
      <description>åœ¨linuxä¸Šå®‰è£…dockerï¼Œå®˜æ–¹æœ‰è¯¦ç»†çš„æ•™ç¨‹æŒ‡å¯¼å¦‚ä½•å®‰è£…ã€‚ä½†å¦‚æœä½ å’Œæˆ‘ä¸€æ ·ç”¨çš„linuxå‘è¡Œç‰ˆæ˜¯debianä»¥åŠdebiançš„è¡ç”Ÿå‘è¡Œç‰ˆï¼Œå¯ä»¥ç›´æ¥ç”¨debianå®˜æ–¹ç»´æŠ¤çš„docker.ioã€‚
apt install docker.io dockerå®˜æ–¹æŠŠdocker.ioç§°ä¸ºunofficial packageséå®˜æ–¹çš„ç‰ˆæœ¬ã€‚
å› ä¸ºdocker.ioæ˜¯debianåœ¨ç»´æŠ¤è€Œä¸æ˜¯dockerå®˜æ–¹ï¼Œè€Œä¸”2019å¹´çš„æ—¶å€™æ›¾ç»åœæ­¢ç»´æŠ¤äº†1å¹´å¯¼è‡´ç‰ˆæœ¬è½åå¤ªå¤šã€‚ä½†ç°åœ¨ä¸ç”¨æ‹…å¿ƒdocker.ioç‰ˆæœ¬é—®é¢˜ï¼Œç›®å‰ä»“åº“é‡Œå·²ç»æ˜¯20.10.24ã€‚</description>
    </item>
    
  </channel>
</rss>
