<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Netplan on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/netplan/</link>
    <description>Recent content in Netplan on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 05 Oct 2024 17:44:14 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/netplan/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨Debianä¸Šè®¾ç½®é™æ€IPï¼ˆå›ºå®šIPï¼‰</title>
      <link>https://ruohai.wang/202410/debian-config-static-ip/</link>
      <pubDate>Sat, 05 Oct 2024 17:44:14 +0800</pubDate>
      
      <guid>https://ruohai.wang/202410/debian-config-static-ip/</guid>
      <description>å‰è¨€ æˆ‘ç›®å‰æ¥è§¦åˆ°çš„debianç”¨åˆ°çš„ç½‘ç»œç®¡ç†å·¥å…·æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¼ ç»Ÿçš„networkmanagerï¼Œå¦ä¸€ä¸ªæ˜¯netplanã€‚
ä¸¤ç§ç½‘ç»œç®¡ç†å·¥å…·ä¸‹é…ç½®é™æ€ipçš„æ–¹æ³•ä¸å¤ªä¸€æ ·ï¼Œè¿™é‡Œæ±‡æ€»åšä¸ªè®°å½•ã€‚
åŒºåˆ†networkmanagerå’Œnetplan é¦–å…ˆè¦ææ¸…æ¥šè‡ªå·±çš„debianç³»ç»Ÿç”¨çš„ç½‘ç»œç®¡ç†å·¥å…·æ˜¯å“ªä¸ªï¼Œchatgptçš„å›ç­”å¦‚ä¸‹
ä½†å®é™…åˆ¤æ–­networkmanagerçš„æ–¹æ³•ä¸å¤ªå¯¹ï¼Œæœ‰æ•ˆçš„æ–¹æ³•åªéœ€è¦çœ‹/etc/networkç›®å½•ä¸‹æ˜¯ä¸æ˜¯æœ‰interfacesæ–‡ä»¶å³å¯ã€‚
åˆ¤æ–­netplanï¼Œåªéœ€è¦çœ‹æ˜¯å¦æœ‰/etc/netplanè¿™ä¸ªç›®å½•ï¼Œå¹¶æŸ¥çœ‹è¿™ä¸ªç›®å½•ä¸‹æ˜¯å¦æœ‰é…ç½®æ–‡ä»¶ã€‚
è·å–ç½‘å¡è®¾å¤‡åç§° ä½¿ç”¨å‘½ä»¤ip addræŸ¥çœ‹ç½‘å¡çš„åç§°ï¼Œåé¢é…ç½®çš„æ—¶å€™éœ€è¦ç”¨åˆ°
å¦‚æœæ‰€ç¤ºï¼Œç½‘å¡åç§°å³ä¸ºenp2s0
networkmanager ç¼–è¾‘/etc/network/interfacesæ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚å½•å…¥é™æ€ipå‚æ•°å³å¯
allow-hotplug enp2s0 # æ”¯æŒçƒ­æ’æ‹” auto enp2s0 # å¼€æœºè‡ªåŠ¨å¯ç”¨eth0 iface enp2s0 inet static # ä½¿ç”¨é™æ€ip address 192.168.1.4 # ipåœ°å€ netmask 255.255.255.0 # å­ç½‘æ©ç  gateway 192.168.1.1 # ç½‘å…³åœ°å€ dns-nameservers 192.168.1.1 # dnsæœåŠ¡å™¨ ç¼–è¾‘åä¿å­˜é€€å‡ºï¼Œç„¶åé‡å¯ç½‘ç»œæœåŠ¡
sudo systemctl restart networking.service netplan netplançš„æƒ…å†µç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºnetplanæ˜¯ä¸€ä¸ªé…ç½®å·¥å…·ï¼Œéœ€è¦æ­é…åº•å±‚æ¥å®ç°ç½‘ç»œç®¡ç†ï¼Œé‚£åº•å±‚ç®¡ç†å·¥å…·å¯ä»¥æ˜¯networkmanagerï¼Œä¹Ÿå¯ä»¥æ˜¯systemd-networkdã€‚
æˆ‘ç¢°åˆ°çš„æƒ…å†µéƒ½æ˜¯netplan + networkdçš„ç»„åˆï¼ŒæŸ¥çœ‹/etc/netplanç›®å½•ä¸‹çš„yamlé…ç½®æ–‡ä»¶å³å¯ã€‚æ³¨æ„æ¯ä¸ªç³»ç»Ÿçš„netplançš„yamlé…ç½®æ–‡ä»¶åç§°ä¸ä¸€å®šç›¸åŒï¼Œæ ¹æ®è‡ªå·±æƒ…å†µè°ƒæ•´ã€‚
åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç®¡ç†ç½‘ç»œçš„å·¥å…·æ˜¯networkdã€‚
é‚£æ¥ä¸‹å»å°±æœ‰ä¸¤ç§ä¿®æ”¹æ–¹æ³•ï¼ŒnetplanæŒ‡å®šç½‘ç»œå·¥å…· + netplanç”Ÿæˆé…ç½®ï¼Œæˆ–è€…netplanåªæŒ‡å®šç½‘ç»œå·¥å…· + networkdé…ç½®ã€‚å‡ºäºé…ç½®çš„éš¾æ˜“ç¨‹åº¦ &amp;amp; å¯é˜…è¯»æ€§è€ƒè™‘ï¼Œæˆ‘æ¨èä½¿ç”¨åä¸€ä¸ªæ–¹æ¡ˆã€‚
é¦–å…ˆä¿®æ”¹/etc/netplanç›®å½•ä¸‹çš„yamlé…ç½®æ–‡ä»¶ï¼Œåªéœ€è¦æŒ‡å®šrendereræ˜¯networkdå³å¯ï¼Œä¸‹é¢å…³äºdhcpçš„é…ç½®éƒ½æ³¨é‡Šã€‚
ç„¶ååˆ°/etc/systemd/networkç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªnetworké…ç½®æ–‡ä»¶ï¼ŒåŸå§‹é…ç½®æ˜¯å°†ç½‘ç»œé…ç½®åŠŸèƒ½æ‰˜ç®¡ç»™äº†netplanã€‚
æˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±éœ€æ±‚ä¿®æ”¹é…ç½®
[Match] Name=eth0	# ç½‘å¡åç§° [Network] Address=192.168.1.123/24	# é™æ€ip Gateway=192.</description>
    </item>
    
    <item>
      <title>åœ¨Netplanå’Œsystemd-networkdçš„ç»„åˆä¸‹é…ç½®é™æ€IP</title>
      <link>https://ruohai.wang/202407/netplan-systemd-networkd-set-static-ip/</link>
      <pubDate>Sat, 06 Jul 2024 21:38:33 +0800</pubDate>
      
      <guid>https://ruohai.wang/202407/netplan-systemd-networkd-set-static-ip/</guid>
      <description>å‰è¨€ æœ€è¿‘åˆç¿»å‡ºç§å®¶äº‘äºŒä»£ï¼ˆä¹Ÿå«æ¯”ç‰¹ç±³ç›’ï¼‰å‡†å¤‡åˆ·æœºå½“ä¸‹è½½æœºç”¨ï¼Œä¸€ç•ªæŠ˜è…¾ä»¥åæˆåŠŸçš„åˆ·ä¸Škhadas vim1çš„å›ºä»¶armbian-24.5.3-minimalï¼Œè¿›è¡Œåˆå§‹é…ç½®çš„æ—¶å€™å‘ç°è¿™ç‰ˆå›ºä»¶ç”¨çš„ç½‘ç»œç®¡ç†æ–¹æ¡ˆæ˜¯netplan + systemd-networkdï¼Œè¿™è®©æˆ‘ä¸€ä¸‹å­ä¸çŸ¥é“è¦æ€ä¹ˆé…ç½®é™æ€ipã€‚
å› ä¸ºä¹‹å‰åˆ·è¿‡çš„é‚£ä¹ˆå¤šç›’å­ã€é‚£ä¹ˆå¤šå›ºä»¶ï¼Œç½‘ç»œç®¡ç†æ–¹æ¡ˆéƒ½æ˜¯å•ç‹¬çš„networkmanagerï¼Œæˆ–è€…æ˜¯netplan + networkmanagerã€‚è€Œæ‰‹ä¸Šè¿™ä¸ªå›ºä»¶ï¼Œå®ƒæ˜¯networkdç®¡ç† + netplané…ç½®çš„æ¨¡å¼ã€‚
çœŸçš„æ˜¯æœ‰ç‚¹å„¿ä¸€å¤´é›¾æ°´ï¼Œè€Œä¸”netplané…ç½®æ–‡ä»¶yamlæ ¼å¼æ˜¯æŒ‰ç…§ç¼©è¿›ç©ºæ ¼æ•°æ¥è¯†åˆ«çš„ï¼ŒğŸ˜«
æœ€åå­¦ä¹ äº†ä¸€æ™šä¸Šç½‘ä¸Šçš„æœ‰å…³netplan + systemd-networkdçš„é…ç½®æ•™ç¨‹ï¼ŒåŠ ä¸Šè‡ªå·±çš„ç®€å•å®è·µï¼Œè¿˜æ˜¯æˆåŠŸé…ç½®äº†é™æ€ipã€‚å†™ç¯‡æ–‡ç« ï¼Œåšä¸ªç®€å•è®°å½•ã€‚
é…ç½® é¦–å…ˆç¡®è®¤ä¸‹æˆ‘ç”¨çš„å›ºä»¶çš„é»˜è®¤ç½‘ç»œè®¾å¤‡çš„ç®¡ç†æ–¹æ¡ˆæ˜¯systemd-networkdï¼Œç½‘ç»œçš„é…ç½®å·¥å…·æ˜¯netplanã€‚
ä¸ºäº†ç®€åŒ–é…ç½®ï¼Œæˆ‘å†³å®šæ”¹æˆnetplanåªç”¨æ¥æŒ‡å®šæ¸²æŸ“å™¨ï¼ˆrendererï¼‰ï¼ŒæŠŠç½‘ç»œè®¾å¤‡çš„ç®¡ç†å’Œé…ç½®éƒ½ç”¨systemd-networkdæå®šã€‚ç»å¯¹ä¸æ˜¯å› ä¸ºyamlè¿™ç§ä¾èµ–ç¼©è¿›æ ¼å¼çš„é…ç½®æ–‡ä»¶è®©æˆ‘éå¸¸å¤´å¤§æ‰€ä»¥æ”¾å¼ƒäº†netplanã€‚
ç¬¬ä¸€æ­¥ï¼šæŒ‡å®šrenderer
é¦–å…ˆè¿›å…¥ç›®å½•/etc/netplanï¼Œç›®å½•ä¸‹åŸæ¥çš„yamlé…ç½®æ–‡ä»¶å…ˆå¤‡ä»½ï¼Œç„¶åæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆæ³¨æ„netplançš„é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§æ˜¯æ ¹æ®æ–‡ä»¶é¦–å­—æ¯é¡ºåºï¼‰ã€‚
åœ¨æ–°å»ºçš„yamlé…ç½®æ–‡ä»¶ä¸­å½•å…¥ä»¥ä¸‹å†…å®¹ï¼ŒæŒ‡å®šrendereræ˜¯networkdå³å¯ï¼Œå…¶å®ƒå†…å®¹éƒ½ä¸éœ€è¦ã€‚
network: version: 2 renderer: networkd æœ€åä¿å­˜é€€å‡ºã€‚
ç¬¬äºŒæ­¥ï¼šé…ç½®systemd-networkd
networkdçš„é…ç½®ç›®å½•æ˜¯/etc/systemd/networkï¼Œå¦‚æœç›®å½•ä¸‹æœ‰æ—§çš„é…ç½®æ–‡ä»¶è¯å…ˆå¤‡ä»½ï¼Œç„¶åæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚
åœ¨æ–°å»ºçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå½•å…¥ä»¥ä¸‹å†…å®¹
[Match] Name=end0 # ç½‘å¡è®¾å¤‡åç§° [Network] Address=192.168.1.122/24 # é™æ€ipåœ°å€ Gateway=192.168.1.1 # ç½‘å…³åœ°å€ DNS=192.168.1.1 # dnsæœåŠ¡å™¨åœ°å€ æœ€åä¿å­˜é€€å‡ºã€‚
ç¬¬ä¸‰æ­¥ï¼šç½‘ç»œé…ç½®ç”Ÿæ•ˆ
å®Œæˆä»¥ä¸Šçš„é…ç½®ä»¥åï¼Œæœ€åä¸€æ­¥å½“ç„¶å°±æ˜¯åº”ç”¨äº†ã€‚
å…ˆé‡å¯networkd
sudo systemctl restart systemd-networkd.service ç„¶åè®©netplanç”Ÿæ•ˆ
# æµ‹è¯•é…ç½® sudo netplan try # åº”ç”¨é…ç½® sudo netplan apply å¥½äº†ï¼Œåˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆäº†ã€‚ğŸ‰
å‚è€ƒæ–‡ç«  å¦‚ä½•åœ¨ Linux ä¸Šä½¿ç”¨ç½‘ç»œé…ç½®å·¥å…· Netplan systemdè®¾ç½®é™æ€IP å¦‚ä½•åœ¨ Linux ä¸Šä»ç½‘ç»œç®¡ç†å™¨åˆ‡æ¢åˆ° systemd-networkd å–æ¯å¥¶èŒ¶ </description>
    </item>
    
  </channel>
</rss>
