<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Netplan on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/netplan/</link>
    <description>Recent content in Netplan on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 06 Jul 2024 21:38:33 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/netplan/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>åœ¨Netplanå’Œsystemd-networkdçš„ç»„åˆä¸‹é…ç½®é™æ€IP</title>
      <link>https://ruohai.wang/202407/netplan-systemd-networkd-set-static-ip/</link>
      <pubDate>Sat, 06 Jul 2024 21:38:33 +0800</pubDate>
      
      <guid>https://ruohai.wang/202407/netplan-systemd-networkd-set-static-ip/</guid>
      <description>å‰è¨€ æœ€è¿‘åˆç¿»å‡ºç§å®¶äº‘äºŒä»£ï¼ˆä¹Ÿå«æ¯”ç‰¹ç±³ç›’ï¼‰å‡†å¤‡åˆ·æœºå½“ä¸‹è½½æœºç”¨ï¼Œä¸€ç•ªæŠ˜è…¾ä»¥åæˆåŠŸçš„åˆ·ä¸Škhadas vim1çš„å›ºä»¶armbian-24.5.3-minimalï¼Œè¿›è¡Œåˆå§‹é…ç½®çš„æ—¶å€™å‘ç°è¿™ç‰ˆå›ºä»¶ç”¨çš„ç½‘ç»œç®¡ç†æ–¹æ¡ˆæ˜¯netplan + systemd-networkdï¼Œè¿™è®©æˆ‘ä¸€ä¸‹å­ä¸çŸ¥é“è¦æ€ä¹ˆé…ç½®é™æ€ipã€‚
å› ä¸ºä¹‹å‰åˆ·è¿‡çš„é‚£ä¹ˆå¤šç›’å­ã€é‚£ä¹ˆå¤šå›ºä»¶ï¼Œç½‘ç»œç®¡ç†æ–¹æ¡ˆéƒ½æ˜¯å•ç‹¬çš„networkmanagerï¼Œæˆ–è€…æ˜¯netplan + networkmanagerã€‚è€Œæ‰‹ä¸Šè¿™ä¸ªå›ºä»¶ï¼Œå®ƒæ˜¯networkdç®¡ç† + netplané…ç½®çš„æ¨¡å¼ã€‚
çœŸçš„æ˜¯æœ‰ç‚¹å„¿ä¸€å¤´é›¾æ°´ï¼Œè€Œä¸”netplané…ç½®æ–‡ä»¶yamlæ ¼å¼æ˜¯æŒ‰ç…§ç¼©è¿›ç©ºæ ¼æ•°æ¥è¯†åˆ«çš„ï¼ŒğŸ˜«
æœ€åå­¦ä¹ äº†ä¸€æ™šä¸Šç½‘ä¸Šçš„æœ‰å…³netplan + systemd-networkdçš„é…ç½®æ•™ç¨‹ï¼ŒåŠ ä¸Šè‡ªå·±çš„ç®€å•å®è·µï¼Œè¿˜æ˜¯æˆåŠŸé…ç½®äº†é™æ€ipã€‚å†™ç¯‡æ–‡ç« ï¼Œåšä¸ªç®€å•è®°å½•ã€‚
é…ç½® é¦–å…ˆç¡®è®¤ä¸‹æˆ‘ç”¨çš„å›ºä»¶çš„é»˜è®¤ç½‘ç»œè®¾å¤‡çš„ç®¡ç†æ–¹æ¡ˆæ˜¯systemd-networkdï¼Œç½‘ç»œçš„é…ç½®å·¥å…·æ˜¯netplanã€‚
ä¸ºäº†ç®€åŒ–é…ç½®ï¼Œæˆ‘å†³å®šæ”¹æˆnetplanåªç”¨æ¥æŒ‡å®šæ¸²æŸ“å™¨ï¼ˆrendererï¼‰ï¼ŒæŠŠç½‘ç»œè®¾å¤‡çš„ç®¡ç†å’Œé…ç½®éƒ½ç”¨systemd-networkdæå®šã€‚ç»å¯¹ä¸æ˜¯å› ä¸ºyamlè¿™ç§ä¾èµ–ç¼©è¿›æ ¼å¼çš„é…ç½®æ–‡ä»¶è®©æˆ‘éå¸¸å¤´å¤§æ‰€ä»¥æ”¾å¼ƒäº†netplanã€‚
ç¬¬ä¸€æ­¥ï¼šæŒ‡å®šrenderer
é¦–å…ˆè¿›å…¥ç›®å½•/etc/netplanï¼Œç›®å½•ä¸‹åŸæ¥çš„yamlé…ç½®æ–‡ä»¶å…ˆå¤‡ä»½ï¼Œç„¶åæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆæ³¨æ„netplançš„é…ç½®æ–‡ä»¶çš„ä¼˜å…ˆçº§æ˜¯æ ¹æ®æ–‡ä»¶é¦–å­—æ¯é¡ºåºï¼‰ã€‚
åœ¨æ–°å»ºçš„yamlé…ç½®æ–‡ä»¶ä¸­å½•å…¥ä»¥ä¸‹å†…å®¹ï¼ŒæŒ‡å®šrendereræ˜¯networkdå³å¯ï¼Œå…¶å®ƒå†…å®¹éƒ½ä¸éœ€è¦ã€‚
network: version: 2 renderer: networkd æœ€åä¿å­˜é€€å‡ºã€‚
ç¬¬äºŒæ­¥ï¼šé…ç½®systemd-networkd
networkdçš„é…ç½®ç›®å½•æ˜¯/etc/systemd/networkï¼Œå¦‚æœç›®å½•ä¸‹æœ‰æ—§çš„é…ç½®æ–‡ä»¶è¯å…ˆå¤‡ä»½ï¼Œç„¶åæ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚
åœ¨æ–°å»ºçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå½•å…¥ä»¥ä¸‹å†…å®¹
[Match] Name=end0 # ç½‘å¡è®¾å¤‡åç§° [Network] Address=192.168.1.122/24 # é™æ€ipåœ°å€ Gateway=192.168.1.1 # ç½‘å…³åœ°å€ DNS=192.168.1.1 # dnsæœåŠ¡å™¨åœ°å€ æœ€åä¿å­˜é€€å‡ºã€‚
ç¬¬ä¸‰æ­¥ï¼šç½‘ç»œé…ç½®ç”Ÿæ•ˆ
å®Œæˆä»¥ä¸Šçš„é…ç½®ä»¥åï¼Œæœ€åä¸€æ­¥å½“ç„¶å°±æ˜¯åº”ç”¨äº†ã€‚
å…ˆé‡å¯networkd
sudo systemctl restart systemd-networkd.service ç„¶åè®©netplanç”Ÿæ•ˆ
# æµ‹è¯•é…ç½® sudo netplan try # åº”ç”¨é…ç½® sudo netplan apply å¥½äº†ï¼Œåˆ°è¿™é‡Œå°±å¤§åŠŸå‘Šæˆäº†ã€‚ğŸ‰
å–æ¯å¥¶èŒ¶ </description>
    </item>
    
  </channel>
</rss>
