<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>CIFS on 喵ฅ^•ﻌ•^ฅ</title>
    <link>https://ruohai.wang/tags/cifs/</link>
    <description>Recent content in CIFS on 喵ฅ^•ﻌ•^ฅ</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Fri, 21 Jul 2023 00:37:06 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/cifs/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Linux下CIFS设置开机自动挂载smb共享文件夹</title>
      <link>https://ruohai.wang/202307/cifs-auto-mount-at-linux-start-up/</link>
      <pubDate>Fri, 21 Jul 2023 00:37:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/cifs-auto-mount-at-linux-start-up/</guid>
      <description>前言 前两天写过一篇用cifs挂载smb共享文件夹的文章，但那篇文章中多有疏漏，本来直接在那篇文章中update补漏修正就行，但最近懒了，直接择重点重写一篇。
linux挂载smb共享文件夹涉及到很多权限分配的设置，比如smb服务端设置的用户和组、本地分配的用户和组、是不是指定文件和文件夹的默认权限。如果实在搞不清，那就直接root:root和0777一把梭，但千万而且一定要意识到root和0777的潜在风险。
设定 注意下面出现的配置文件中的ip地址、用户名、组名、密码都要根据自己的情况做修改。😄
设定本地用户都是jack，所属的组是jack-group 设定的smb共享文件夹的访问地址是//192.168.1.1/share，访问用户smb，访问密码123456 设定本地挂载smb共享文件夹的路径是/mnt/share 挂载 linux下安装cifs-utils后，挂载局域网smb共享文件夹，注意-o参数中别忘记加上iocharset=utf8以避免中文乱码的问题。
mount -t cifs //192.168.1.1/share /mnt/share -o username=smb,password=123456,iocharset=utf8 取消挂载
umount /mnt/share 开机自动挂载 编辑/etc/fstab文件，添加一行：
//192.168.1.1/share /mnt/share cifs credentials=/home/jack/.cifs_creds,file_mode=0755,dir_mode=0755,iocharset=utf8,uid=jack,gid=jack&amp;#39;s_group 0 0 注意：
smb访问账户的用户名和密码，建议单独新建一个文件来保存而不是明文写在fstab。我这里新建/home/jack/.cifs_creds。认证文件的格式如下： username=smb password=123456 # 下面这一栏可以不要 domain=WORKGROUP domain一栏可选，不填的话系统会自动猜（意味着猜不中就无法挂载），一般默认都是WORKGROUP uid=jack,gid=jack&#39;s_group，这是指定挂载的smb共享文件夹的本地用户和组分配给谁、给哪个组，如果没有指定uid和gid，默认就是root:root。 file_mode=0755,dir_mode=0755，这俩很好理解，文件的权限和文件夹的权限，0755什么意思不再赘述，不懂得话0777一把梭。 iocharset=utf8用来处理中文乱码问题 编辑完/etc/fstab，执行以下命令使配置生效：
# 重载 systemctl daemon-reload # 重新挂载 mount -a OK，大功告成~
😄</description>
    </item>
    
    <item>
      <title>Linux下实现挂载SMB共享文件夹</title>
      <link>https://ruohai.wang/202307/linux-smb-mount/</link>
      <pubDate>Sat, 15 Jul 2023 14:40:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/linux-smb-mount/</guid>
      <description>linux下访问局域网上的smb共享文件夹，需要安装cifs-utils。
apt install cifs-utils 这里假定共享文件夹的网络位置是http://smb_ip/share，用户名smb，密码123456。
mount -t cifs //smb_ip/share /mnt/share -o username=smb,password=123456 -t cifs，挂载的文件类型，smb为-t cifs。 //smb_ip/share，smb共享文件夹的网络位置 /mnt/share，本地挂载的位置 -o，-o后面跟的都是挂载的详细参数配置，smb协议、用户名、密码等等，具体可以看这里详细参数解释，或者看图片。 如果要设置开机自动挂载smb，在/etc/fstab文件中添加一行，保存退出即可。
//smb_ip/share /mnt/share cifs username=smb,passwd=123456 0 0 也可以在/etc/samba/目录下新建配置文件smbpasswd用来保存smb的用户名和密码以方便管理，内容如下。
username=smb password=123456 然后 fstab中添加一行
//smb_ip/share /mnt/share cifs credentials=/etc/samba/smbpasswd 0 0 fstab的格式规范如下
&amp;lt;file system&amp;gt; &amp;lt;dir&amp;gt; &amp;lt;type&amp;gt; &amp;lt;options&amp;gt; &amp;lt;dump&amp;gt; &amp;lt;pass&amp;gt; </description>
    </item>
    
  </channel>
</rss>
