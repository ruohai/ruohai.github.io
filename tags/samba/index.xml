<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Samba on å–µà¸…^â€¢ï»Œâ€¢^à¸…</title>
    <link>https://ruohai.wang/tags/samba/</link>
    <description>Recent content in Samba on å–µà¸…^â€¢ï»Œâ€¢^à¸…</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 22 Dec 2024 22:32:26 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/samba/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ä½¿ç”¨systemd-mounté…ç½®nfså’Œsambaå…±äº«çš„å¼€æœºè‡ªåŠ¨æŒ‚è½½</title>
      <link>https://ruohai.wang/202412/systemd-mount-nfs-and-samba/</link>
      <pubDate>Sun, 22 Dec 2024 22:32:26 +0800</pubDate>
      
      <guid>https://ruohai.wang/202412/systemd-mount-nfs-and-samba/</guid>
      <description>å‰è¨€ æœ¬æ–‡æ ¹æ®chatgptçš„å›ç­”è¿›è¡Œæ•´ç†ã€‚
æ­£æ–‡ åœ¨linuxä¸Šç»™é¢å¤–çš„ç¡¬ç›˜é…ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡ç¼–è¾‘/etc/fstabæ¥å®Œæˆï¼Œå¾ˆæ–¹ä¾¿ï¼Œä½†è¿™ç§æ–¹å¼ä¸‹ï¼Œå¦‚æœç¡¬ç›˜ä¸¢å¤±ï¼Œå¼€æœºçš„æ—¶å€™å°±éœ€è¦è¿›å…¥æ¢å¤æ¨¡å¼é‡ç½®/etc/fstabæ‰èƒ½æ­£å¸¸è¿›å…¥ç³»ç»Ÿã€‚
systemd-mountæ¨¡å—ä¹Ÿèƒ½å®Œæˆå¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼ˆå®ƒè®¾è®¡å‡ºæ¥å°±æ˜¯æ›¿ä»£/etc/fstabï¼‰ï¼Œè€Œä¸”åœ¨ä¸¢å¤±ç¡¬ç›˜çš„æƒ…å†µä¸‹ä¸ä¼šå½±å“æ­£å¸¸å¼€æœºï¼Œæ‰€ä»¥å°¤å…¶é€‚åˆç”¨å®ƒæ¥æŒ‚è½½nfsæˆ–è€…sambaå…±äº«çš„ç›®å½•ï¼ˆå› ä¸ºå…±äº«ç›®å½•å¾ˆå¯èƒ½ä¼šæ‰çº¿ï¼‰ã€‚
æ‰€ä»¥è®°å½•ä»¥ä¸‹ç”¨systemd-mountæŒ‚è½½nfså’Œsambaçš„æ¨¡æ¿å’Œæ­¥éª¤ã€‚
NFS
å‡å®šè¦æŠŠnfså…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°/mnt/nfsã€‚
åœ¨/etc/systemd/systemç›®å½•ä¸‹æ–°å»ºmnt-nfs.mountæ–‡ä»¶ï¼Œæ³¨æ„mnt-nfså¯¹åº”æŒ‚è½½ç‚¹/mnt/nfsï¼Œåå­—å¿…é¡»è¦å¯¹åº”ã€‚
é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹
[Unit] Description=Mount NFS share Wants=network-online.target After=network-online.target [Mount] What=remote_server_ip:/remote/path Where=/mnt/nfs Type=nfs Options=_netdev,auto TimeoutSec=30 [Install] WantedBy=multi-user.target å‚æ•°é‡Šä¹‰ï¼š
Whatï¼šNFS æœåŠ¡å™¨å’Œå…±äº«è·¯å¾„ã€‚å°† remote_server_ip:/remote/path æ›¿æ¢ä¸ºä½ å®é™…çš„ NFS æœåŠ¡å™¨ IP åœ°å€å’Œå…±äº«è·¯å¾„ã€‚ Whereï¼šæŒ‚è½½ç‚¹çš„æœ¬åœ°è·¯å¾„ï¼Œå³ /mnt/nfsã€‚ Typeï¼šæ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œè¿™é‡Œæ˜¯ nfsã€‚ Optionsï¼šæŒ‚è½½é€‰é¡¹ï¼Œ_netdev è¡¨ç¤ºç½‘ç»œè®¾å¤‡æŒ‚è½½ï¼Œauto è¡¨ç¤ºåœ¨å¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚ TimeoutSecï¼šå¦‚æœæŒ‚è½½æ“ä½œåœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å®Œæˆï¼Œå°†ç»ˆæ­¢æŒ‚è½½å°è¯•ã€‚ WantedBy=multi-user.targetï¼šä½¿æŒ‚è½½åœ¨ç³»ç»Ÿè¿›å…¥å¤šç”¨æˆ·ç›®æ ‡ï¼ˆå³æ­£å¸¸è¿è¡Œçº§åˆ«ï¼‰æ—¶è¿›è¡Œã€‚ Samba
å‡å®šè¦æŠŠsambaå…±äº«ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°/mnt/smbã€‚
åœ¨/etc/systemd/systemç›®å½•ä¸‹æ–°å»ºmnt-smb.mountæ–‡ä»¶ï¼Œæ³¨æ„mnt-smbå¯¹åº”æŒ‚è½½ç‚¹/mnt/smbï¼Œåå­—å¿…é¡»è¦å¯¹åº”ã€‚
é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹
[Unit] Description=Mount Samba Share After=network.target [Mount] What=//samba-server/share Where=/mnt/smb Type=cifs Options=credentials=/home/username/.smbcredentials,iocharset=utf8,vers=3.0,uid=1000,gid=1000 TimeoutSec=30 [Install] WantedBy=multi-user.target å‚æ•°é‡Šä¹‰ï¼š
Whatï¼šSamba å…±äº«çš„åœ°å€ï¼ˆ//samba-server/shareï¼‰ã€‚ Whereï¼šæŒ‚è½½ç‚¹ï¼ˆ/mnt/smbï¼‰ã€‚ Optionsï¼šæŒ‚è½½é€‰é¡¹ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ã€‚æ¯”å¦‚ credentials æ˜¯æŒ‡ä¸€ä¸ªåŒ…å«ç”¨æˆ·åå’Œå¯†ç çš„æ–‡ä»¶ï¼ˆ/home/username/.smbcredentialsï¼‰ã€‚ TimeoutSecï¼šæŒ‚è½½æ“ä½œçš„è¶…æ—¶è®¾ç½®ï¼ˆå¯æ ¹æ®éœ€è¦è°ƒæ•´ï¼‰ã€‚ æœ€åä¸€æ­¥ï¼šå¯ç”¨æœåŠ¡
å®Œæˆä»¥ä¸Šé…ç½®åï¼Œå¯åŠ¨æœåŠ¡ &amp;amp; è®¾ç½®å¼€æœºå¯åŠ¨</description>
    </item>
    
    <item>
      <title>Windowsä¸‹å°†Sambaå…±äº«æ˜ å°„ä¸ºæœ¬åœ°æ–‡ä»¶å¤¹</title>
      <link>https://ruohai.wang/202412/windows-mklink-soft-link/</link>
      <pubDate>Wed, 18 Dec 2024 18:12:24 +0800</pubDate>
      
      <guid>https://ruohai.wang/202412/windows-mklink-soft-link/</guid>
      <description>å‰è¨€ å¼€ç¯‡TIPSï¼šæœ¬æ–‡åŸºäºchatgptå†…å®¹è¿›è¡Œæ•´ç†ã€‚
æ­£æ–‡ åœ¨Windowsä¸Šï¼ŒSambaå…±äº«é€šå¸¸ä¼šè¢«æ˜ å°„ä¸ºç½‘ç»œé©±åŠ¨å™¨ï¼ˆå¦‚Zç›˜ï¼‰ï¼Œè€Œä¸æ˜¯æœ¬åœ°ç£ç›˜ã€‚
Windowsæœ¬èº«å¹¶æ²¡æœ‰ç›´æ¥æä¾›å°†Sambaå…±äº«æ˜ å°„ä¸ºæœ¬åœ°ç£ç›˜çš„åŠŸèƒ½ï¼Œå› ä¸ºSambaå…±äº«æœ¬è´¨ä¸Šä»ç„¶æ˜¯é€šè¿‡ç½‘ç»œåè®®ï¼ˆå¦‚SMB/CIFSï¼‰è¿›è¡Œè®¿é—®çš„ã€‚
ç„¶è€Œï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›æ›¿ä»£æ–¹æ³•å®ç°ç±»ä¼¼çš„æ•ˆæœï¼š
æ–¹æ³•ä¸€ï¼šä½¿ç”¨ç¬¦å·é“¾æ¥ï¼ˆSymbolic Linkï¼‰:
ä½ å¯ä»¥åœ¨Windowsä¸Šåˆ›å»ºç¬¦å·é“¾æ¥ï¼Œå°†æŸä¸ªç›®å½•é“¾æ¥åˆ°Sambaå…±äº«ç›®å½•ã€‚è¿™æ ·ï¼Œè™½ç„¶å…±äº«ä»ç„¶é€šè¿‡ç½‘ç»œè®¿é—®ï¼Œä½†å¯ä»¥åƒæœ¬åœ°ç›®å½•ä¸€æ ·ä½¿ç”¨ã€‚
åœ¨cmdå‘½ä»¤è¡Œä¸­ï¼Œä½¿ç”¨mklinkå‘½ä»¤ï¼Œæ³¨æ„ä½¿ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨cmdï¼Œå¦åˆ™ä¼šæŠ¥æƒé™ä¸è¶³ï¼š
mklink /D E:\samba \\192.168.1.111\movie å…¶ä¸­/dæˆ–è€…/DæŒ‡çš„æ˜¯è½¯é“¾æ¥ï¼Œå¯¹åº”çš„ç¡¬é“¾æ¥å‚æ•°æ˜¯/Jæˆ–è€…/jã€‚
ä½¿ç”¨ä»¥ä¸Šå‘½ä»¤å³å¯å°†192.168.1.111æœåŠ¡å™¨ä¸Šå…±äº«çš„movieç›®å½•æ˜ å°„åˆ°æœ¬åœ°Eç›˜çš„sambaæ–‡ä»¶å¤¹ã€‚
Tipsï¼šæˆ‘ç”¨çš„è¿™ä¸ªæ–¹æ³•ï¼Œå®æµ‹æœ‰æ•ˆã€‚ç¼ºç‚¹æ˜¯åªèƒ½æ˜ å°„æˆä¸€ä¸ªæœ¬åœ°æ–‡ä»¶å¤¹ã€‚
æ–¹æ³•äºŒï¼šåˆ©ç”¨ç¬¬ä¸‰æ–¹è½¯ä»¶ï¼ˆå¦‚Rcloneã€WinFspç­‰ï¼‰:
æœ‰äº›ç¬¬ä¸‰æ–¹å·¥å…·å¦‚Rcloneï¼ˆä¸€ä¸ªå¼€æºå·¥å…·ï¼‰å…è®¸ä½ å°†è¿œç¨‹å…±äº«ï¼ˆåŒ…æ‹¬Sambaï¼‰æŒ‚è½½ä¸ºæœ¬åœ°ç£ç›˜ï¼ˆç±»ä¼¼äºç½‘ç»œé©±åŠ¨å™¨ï¼Œä½†æ›´åŠ çµæ´»ï¼‰ã€‚ ä½¿ç”¨Rcloneæ—¶ï¼Œä½ å¯ä»¥é€šè¿‡è®¾ç½®æŒ‚è½½å‘½ä»¤æŠŠSambaå…±äº«æŒ‚è½½åˆ°Windowsçš„æœ¬åœ°ç£ç›˜ä¸Šï¼Œè¡¨ç°å¾—æ›´åƒæœ¬åœ°ç£ç›˜ã€‚ ä¾‹å¦‚ï¼š
rclone mount remote:/path/to/share X: --vfs-cache-mode writes è¿™é‡Œçš„ remote:/path/to/share ä»£è¡¨Sambaå…±äº«ï¼ŒX: æ˜¯ä½ å¸Œæœ›å®ƒæ˜ å°„ä¸ºçš„æœ¬åœ°é©±åŠ¨å™¨å­—æ¯ã€‚
å–æ¯å¥¶èŒ¶ </description>
    </item>
    
    <item>
      <title>è®©Sambaå…±äº«æ”¯æŒè½¯é“¾æ¥ï¼ˆsymlinkï¼‰</title>
      <link>https://ruohai.wang/202407/samba-enable-symlinks/</link>
      <pubDate>Thu, 25 Jul 2024 16:02:37 +0800</pubDate>
      
      <guid>https://ruohai.wang/202407/samba-enable-symlinks/</guid>
      <description>å‰è¨€ æ˜¨å¤©æƒ³åˆ°åœ¨sambaå…±äº«çš„ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªè½¯é“¾æ¥æŒ‡å‘äº†å¦å¤–ä¸€ä¸ªç›®å½•ï¼Œè¯•ä¸€ä¸‹èƒ½å¦é€šè¿‡è¿™ç§æ–¹å¼æŠŠå¤šä¸ªç›®å½•æ•´åˆåˆ°ä¸€ä¸ªå…±äº«ç›®å½•ä¸‹ï¼Œæ–¹ä¾¿windowsä¸Šè¿›è¡Œè®¿é—®ã€‚è¿™æ ·çš„è¯ï¼Œwindowsåªéœ€è¦æ·»åŠ ä¸€ä¸ªç½‘ç»œæ–‡ä»¶å¤¹å°±è¡Œäº†ï¼Œä¸éœ€è¦æ¯ä¸ªå…±äº«ç›®å½•éƒ½åˆ›å»ºä¸€ä¸ªç½‘ç»œæ–‡ä»¶å¤¹çš„å…¥å£ã€‚
å®é™…æµ‹è¯•ä»¥åï¼Œåœ¨é»˜è®¤çš„sambaé…ç½®ä¸‹ï¼Œå¯ä»¥åœ¨sambaå…±äº«æ–‡ä»¶å†…åˆ›å»ºè½¯è¿æ¥ï¼Œä½†æ˜¯åœ¨windowsç»ˆç«¯ä¸ŠæŒ‚è½½/è®¿é—®è¿™ä¸ªç›®å½•æ˜¯çœ‹ä¸åˆ°ç›®å½•å†…çš„è½¯é“¾æ¥çš„ã€‚
ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹ï¼Œåªéœ€è¦ç®€å•é…ç½®å°±å¯ä»¥æ”¯æŒï¼Œåœ¨æ­¤åšä¸ªè®°å½•ã€‚
é…ç½® ç½‘ä¸Šæ‰¾åˆ°çš„é…ç½®æ•™ç¨‹é‡Œéƒ½è¯´åœ¨smb.confæ–‡ä»¶ä¸­æ·»åŠ ä¸‰ä¸ªé…ç½®å³å¯ï¼Œå¦‚ä¸‹
wide links = yes follow symlinks = yes unix extensions = no ç›´æ¥åŠ åˆ°globalåŸŸç„¶åé‡å¯smbd.serviceä»¥åå°±è¡Œäº†ã€‚
æµ‹è¯•æˆåŠŸä»¥åèµ·äº†å¥½å¥‡å¿ƒï¼Œé¡ºä¾¿æŸ¥äº†ä¸‹sambaå®˜æ–¹wikiè¿™ä»¨å‚æ•°éƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥ä¼˜åŒ–ã€ç²¾ç®€ã€‚
ä»¥ä¸‹å°±æ˜¯å‚æ•°é‡Šç–‘ï¼š
wide links
ç®€å•æ¥è®²å°±æ˜¯ã€æ˜¯å¦å…è®¸sambaæœåŠ¡è·Ÿè¸ªä½äºå…±äº«ç›®å½•ä¹‹å¤–çš„é“¾æ¥ã€‘ï¼Œé»˜è®¤æ˜¯noã€‚è®²äººè¯å°±æ˜¯ï¼Œå‡è®¾æŒ‡å®šå…±äº«dataç›®å½•ï¼Œç„¶ådataç›®å½•ä¸‹æœ‰ä¸ªè½¯è¿æ¥æŒ‡å‘äº†dataä¹‹å¤–çš„å…¶å®ƒç›®å½•ï¼Œè¿™æ˜¯å¦å…è®¸ï¼Œé»˜è®¤æ˜¯noã€‚
å¾ˆæ˜æ˜¾è¦å®ç°æˆ‘æƒ³è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸ªé…ç½®è¦æ”¹æˆyesã€‚
ç„¶åè¿™ä¸ªå‚æ•°å’Œunix extensionsåŒæ—¶å¯ç”¨çš„è¯ä¼šå­˜åœ¨å®‰å…¨æ¼æ´ï¼Œæ‰€ä»¥è¦å¯åŠ¨wide linkå°±å¿…é¡»æŠŠunix extensionsåŠŸèƒ½å…³é—­ã€‚
ç„¶åå®˜ç½‘wikiå¯¹è¿™ä¸ªå‚æ•°å®šä¹‰çš„ä½œç”¨åŸŸæ˜¯sectionï¼Œæ‰€ä»¥æŒ‰ç…§wikiè§„èŒƒæ˜¯åº”è¯¥é…ç½®åœ¨å…±äº«ç›®å½•ä¸‹è€Œä¸æ˜¯globalåŸŸã€‚
unix extensions
è¿™ä¸ªå‚æ•°æ˜¯smb1 unix extensionsçš„åŒä¹‰è¯ï¼Œä¹Ÿå°±æ˜¯ä»…å¯¹smb1åè®®æœ‰æ•ˆï¼Œå¦‚æœä½ åœ¨smb.confä¸­è®¾å®šäº†æœ€ä½åè®®æ˜¯smb2æˆ–è€…æ›´é«˜ç‰ˆæœ¬ï¼Œé‚£è¿™ä¸ªå‚æ•°å¯ä»¥å¿½ç•¥ã€‚
è¿™ä¸ªå‚æ•°æ˜¯HPå®šä¹‰çš„ç”¨æ¥æ”¯æŒunix smb1/cifsç‰¹æ€§çš„å‚æ•°ï¼Œä½œç”¨åŸŸæ˜¯globalï¼Œé»˜è®¤æ˜¯yesã€‚wikiä¸­ç‰¹åˆ«è¯´æ˜windowsç»ˆç«¯é»˜è®¤å·²ç»ä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼ˆå› ä¸ºwindowsé»˜è®¤ç¦ç”¨smb1åè®®ï¼‰
è€ƒè™‘åˆ°smb1åè®®çš„æ¼æ´ã€æˆ‘è®¿é—®sambaå…±äº«æ–‡ä»¶å¤¹çš„è®¾å¤‡éƒ½æ˜¯windows pcã€å’Œwide linkså‚æ•°å†²çªï¼Œæ‰€ä»¥è¿™ä¸ªå‚æ•°è¦è®¾å®šä¸ºnoã€‚
follow sysmlink
è¿™ä¸ªå‚æ•°ç”¨æ¥è®¾å®šæ˜¯å¦å…è®¸sambaæ”¯æŒè½¯è¿æ¥ï¼Œçœ‹ä¸Šå»å’Œwide linkæ²¡åŒºåˆ«ã€‚
ä½œç”¨åŸŸsectionï¼Œé»˜è®¤æ˜¯å¯ç”¨ã€‚
æ€»ç»“ é€šè¿‡å¯¹å®˜æ–¹wikiçš„æŸ¥è¯¢ï¼Œäº†è§£äº†è¿™ä¸‰ä¸ªé…ç½®å‚æ•°çš„æ˜ç¡®å®šä¹‰ã€‚æ‰€ä»¥ï¼Œåˆç†ã€è§„èŒƒã€ç²¾ç®€çš„é…ç½®å¦‚ä¸‹ï¼š
[global] unix extensions = no [share folder] wide links = yes å–æ¯å¥¶èŒ¶ </description>
    </item>
    
    <item>
      <title>MacOSç³»ç»Ÿä¸‹æ·»åŠ SMBå…±äº«æ–‡ä»¶å¤¹åˆ°å¼€æœºè‡ªåŠ¨æŒ‚è½½</title>
      <link>https://ruohai.wang/202308/macos-smb-folder-auto-mount/</link>
      <pubDate>Wed, 16 Aug 2023 02:02:01 +0800</pubDate>
      
      <guid>https://ruohai.wang/202308/macos-smb-folder-auto-mount/</guid>
      <description>å‰è¨€ æœ€è¿‘ä¸€ä¸ªæœˆå› ä¸ºappleåœ¨ææ•™è‚²ä¼˜æƒ é€è¿™é€é‚£çš„ï¼Œm2èŠ¯ç‰‡ä¹ä¸ç‰ˆæœ¬çš„mac miniç›´æ¥è·Œç ´3000å—ã€‚è¿™ä¹ˆå¤šå¹´æ¥æˆ‘ä¸€ç›´éƒ½æ˜¯Windowsç³»ç»Ÿç”¨æˆ·ï¼Œå¯¹macoså¹¶æ²¡æœ‰ä»€ä¹ˆå…´è¶£ï¼Œä½†çœ‹è¿™ä¹ˆä¾¿å®œçš„ä»½ä¸Šï¼Œå†²åŠ¨å…¥æ‰‹äº†ä¸€ä¸ªã€‚
æˆ‘å¹¶ä¸æ˜¯ä¸€ä¸ªå”¯Windowsç³»ç»Ÿä¸ºå°Šçš„ç”¨æˆ·ï¼Œä¹Ÿç”¨è¿‡ä¸å°‘çš„linuxå‘è¡Œç‰ˆï¼Œç”¨è¿‡çš„æ¡Œé¢ç³»ç»Ÿæœ‰xfceã€gnomeã€unityå’Œæ·±åº¦ddeï¼Œéƒ½è§‰å¾—å¯ä»¥æ¥å—ã€‚ä½†ä¸å¾—ä¸è¯´ï¼Œç¬¬ä¸€æ¬¡ä¸Šæ‰‹macosï¼Œè¿˜æ˜¯ç¢°åˆ°äº†ä¸å°‘åˆ«æ‰­å’Œæ‹§å·´çš„åœ°æ–¹ï¼Œè€Œä¸”å¾ˆå¤šä¹‹å‰ç†Ÿæ‚‰çš„æ“ä½œéƒ½è¦ä»å¤´å¼€å§‹æŸ¥æ‰¾è¦æ€ä¹ˆç”¨ã€‚
æ¯”å¦‚å¼€æœºè‡ªåŠ¨æŒ‚è½½å±€åŸŸç½‘é‡Œçš„smbå…±äº«æ–‡ä»¶å¤¹ã€‚
æŒ‚è½½ å¿«æ·é”®command + Kæ‰“å¼€è¿æ¥æœåŠ¡å™¨çš„çª—å£ï¼Œæˆ–è€…ç”¨é¼ æ ‡ç‚¹å‡»é¡¶éƒ¨èœå•æ çš„ã€å‰å¾€ã€‘ç„¶åé€‰æ‹©ã€è¿æ¥æœåŠ¡å™¨ã€‘ã€‚
è¾“å…¥smbçš„è®¿é—®åœ°å€ã€‚smbå…±äº«åè®®çš„ç½‘å€éœ€è¦ç”¨smb://å¼€å¤´ã€‚
è¾“å…¥è®¿é—®ç½‘å€ï¼Œç‚¹å‡»ã€è¿æ¥ã€‘ï¼Œè¾“å…¥smbè®¾ç½®çš„è´¦æˆ·å¯†ç å°±è¿æ¥æˆåŠŸäº†ã€‚æ‰“å¼€ã€è®¿è¾¾ã€‘å¯ä»¥çœ‹åˆ°ã€‚
åŠ å…¥ç™»å½•é¡¹ ä»¥ä¸Šçš„æ“ä½œåªé’ˆå¯¹æœ¬æ¬¡ç³»ç»Ÿç™»é™†çŠ¶æ€ä¸‹æœ‰æ•ˆï¼Œç³»ç»Ÿé‡å¯ä»¥åï¼Œä¾ç„¶éœ€è¦é‡æ–°æ‰“å¼€ã€è¿æ¥æœåŠ¡å™¨ã€‘çª—å£æ¥æ·»åŠ smbæ–‡ä»¶å¤¹ã€‚ç°åœ¨éœ€è¦æŠŠsmbå…±äº«æ–‡ä»¶å¤¹è®¾ç½®ä¸ºå¼€æœºè‡ªåŠ¨æŒ‚è½½ã€‚
ç½‘ä¸Šæ‰¾äº†ä¸€äº›è®¾ç½®æ–¹æ¡ˆï¼Œå‘ç°ä¸åŒçš„macosç‰ˆæœ¬ç«Ÿç„¶è°ƒæ•´äº†è®¾ç½®å…¥å£ï¼Œæ‰€ä»¥è¿™é‡Œåšç®€å•è®°å½•ã€‚
æ‰“å¼€ã€ç³»ç»Ÿè®¾ç½®ã€‘ï¼Œæ‰¾åˆ°ã€é€šç”¨ã€‘ï¼Œç„¶ååœ¨å³ä¾§æ‰¾åˆ°ã€ç™»å½•é¡¹ã€‘ã€‚
ç‚¹å‡»åŠ å·ã€‚
å¼¹å‡ºæ–°çª—å£ï¼Œé€‰æ‹©smbæ–‡ä»¶å¤¹ä½ç½®ï¼Œæœ€åç¡®å®šå³å¯ã€‚</description>
    </item>
    
    <item>
      <title>è¿…é›·èµšé’±å®ä¸€ä»£ï¼ˆWS1408ï¼‰åœ¨OpenWrtå›ºä»¶åŸºç¡€ä¸Šå®‰è£…å’Œé…ç½®Samba</title>
      <link>https://ruohai.wang/202308/ws1408-samba-use-guide/</link>
      <pubDate>Wed, 02 Aug 2023 22:35:07 +0800</pubDate>
      
      <guid>https://ruohai.wang/202308/ws1408-samba-use-guide/</guid>
      <description>å‰è¨€ ws1408åªæœ‰ä¸€ç‰ˆopenwrtå›ºä»¶ï¼Œè¦åœ¨openwrtçš„åŸºç¡€ä¸Šå®‰è£…sambaï¼Œå’Œarmbianæœ‰ç‚¹ä¸å¤ªä¸€æ ·ï¼Œè¿™é‡Œåšç®€å•è®°å½•ã€‚
å…¶å®åœ¨oenwrtçš„webuiä¸Šä¹Ÿæœ‰å…¥å£å¯ä»¥å®‰è£…è½¯ä»¶å’Œé…ç½®ï¼Œä½†æˆ‘å®é™…ç”¨ä¸‹æ¥æ€»æ˜¯ä¼šæœ‰å„ç§é—®é¢˜ã€‚æ‰€ä»¥æœ€åæ”¾å¼ƒäº†webuiå®‰è£…å’Œé…ç½®çš„æ–¹æ³•ï¼Œç›´æ¥æ‰‹æ“ã€‚çœŸçš„ï¼Œè‡ªå·±æ‰‹æ“æ¯”webuiä¸Šå‹¾å‹¾ç‚¹ç‚¹æˆåŠŸç‡é«˜å¤šäº†ã€‚
è¦å®‰è£…è½¯ä»¶ï¼Œè®°å¾—å…ˆæ¢æºï¼ŒæŒ‡è·¯ï¼šè¿…é›·èµšé’±å®ä¸€ä»£ï¼ˆWS1408ï¼‰çš„OpenWrtå¯ç”¨æºåˆ†äº«
å®‰è£…samba å…ˆæ›´æ–°è½¯ä»¶ä»“åº“
opkg update æŸ¥æ‰¾è½¯ä»¶
opkg list | grep samba å®‰è£…è½¯ä»¶
opkg install luci-app-samba4 æ·»åŠ ç³»ç»Ÿç”¨æˆ· ws1408çš„openwrtå›ºä»¶æ¯”è¾ƒç²¾ç®€ï¼Œé»˜è®¤åªæœ‰rootè´¦æˆ·ï¼Œæƒ³æ–°å¢ç³»ç»Ÿç”¨æˆ·éœ€è¦å®‰è£…useraddã€‚
opkg install shadow-useradd æ·»åŠ ç”¨æˆ·jackã€‚è¿™é‡ŒæŒ‡å®šjackè¿™ä¸ªç”¨æˆ·æ— æ³•ç™»å½•ï¼Œå› ä¸ºåªæ˜¯ç”¨æ¥åšsambaçš„ç”¨æˆ·ï¼Œä¸ä¼šç™»å½•ç³»ç»Ÿã€‚
useradd jack -s /bin/false å¦‚æœjackè¿™ä¸ªç”¨æˆ·éœ€è¦ç™»å½•ç³»ç»Ÿï¼Œé‚£ä¸Šé¢çš„å‘½ä»¤ä¸­å»æ‰-s /bin/falseï¼Œç„¶åç»™ä»–è®¾ç½®å¯†ç 
passwd jack sambaä¸­æ·»åŠ ç”¨æˆ· æ·»åŠ äº†ç³»ç»Ÿç”¨æˆ·ä»¥åï¼Œéœ€è¦åœ¨sambaä¸­æ·»åŠ ç”¨æˆ·ã€‚ä¸‹é¢è¿™æ¡å‘½ä»¤æ•²å®Œåå›è½¦ï¼Œæ ¹æ®ç³»ç»Ÿä¼šæç¤ºè®¾ç½®å¯†ç 
smbpasswd -a jack å¦‚æœæƒ³è¦åˆ é™¤sambaç”¨æˆ·ï¼Œå‘½ä»¤åº”è¯¥å¦‚ä¸‹
smbpasswd -x jack ä½†æˆ‘å®é™…ä½¿ç”¨ä¸‹æ¥ï¼Œè¿™æ¡åˆ é™¤ç”¨æˆ·çš„å‘½ä»¤ä¼šä¸€ç›´æç¤ºå¤„ç†å¤±è´¥ã€‚æ‰€ä»¥æœ‰æ•ˆçš„åŠæ³•æ˜¯ç”¨nanoæ‰“å¼€/etc/samba/smbpasswdè¿™ä¸ªä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„æ–‡ä»¶ï¼Œåˆ é™¤æˆ–è€…æ¸…ç©ºé‡Œé¢çš„å†…å®¹ã€‚
é…ç½®å…±äº«æ–‡ä»¶å¤¹ sambaé…ç½®æ–‡ä»¶çš„è·¯å¾„æ˜¯/etc/samba/smb.confï¼Œä½†é»˜è®¤çš„è¿™ä¸ªsmb.confé…ç½®æ–‡ä»¶åªæ˜¯ä¸€ä¸ªè½¯é“¾æ¥ï¼Œå®é™…æŒ‡å‘äº†/var/etc/smb.confã€‚æˆ‘å°è¯•ç›´æ¥ä¿®æ”¹è¿™ä¸ªè½¯é“¾æ¥ç‰ˆçš„smb.confæ–‡ä»¶ï¼Œä½†æ¯æ¬¡ä¸€é‡å¯sambaæœåŠ¡å°±ä¼šè¢«é‡ç½®ã€‚é‚£æ­£å¥½ï¼ŒåŸå§‹æ–‡ä»¶ä¸åŠ¨ï¼Œå’±å¦ç«‹é—¨æˆ·ã€‚
# è¿›ç›®å½• cd /etc/samba # æŠŠåŸæ–‡ä»¶é‡å‘½å mv smb.conf smb.conf.default # æ–°å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ touch smb.conf ç„¶åç”¨nanoç¼–è¾‘smb.confï¼Œå¡«å†™ä»¥ä¸‹å†…å®¹ã€‚å› ä¸ºæˆ‘å¯¹sambaå…±äº«çš„å®‰å…¨æ€§è¦æ±‚ç•¥é«˜ï¼Œæ‰€ä»¥é™å®šsmbæœ€ä½ç‰ˆæœ¬æ˜¯smb2ï¼Œé™å®šåªæœ‰jackå¯ä»¥è®¿é—®ï¼Œè€Œä¸”ç¦æ­¢åŒ¿åè®¿é—®ã€‚
#======================= Global Setting ======================= [global] workgroup = WORKGROUP security = user server role = standalone server map to guest = never server min protocol = SMB2 #======================= Share Definitions ======================= [ShareFolder] comment = share comment path = /path/to/folder create mask = 0755 directory mask = 0755 valid users = jack browseable = yes writable = yes read only = no public = no guest ok = no å®Œæˆä»¥ä¸Šçš„é…ç½®ä»¥åï¼Œé‡å¯sambaã€‚</description>
    </item>
    
    <item>
      <title>Linuxä¸‹CIFSè®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½smbå…±äº«æ–‡ä»¶å¤¹</title>
      <link>https://ruohai.wang/202307/cifs-auto-mount-at-linux-start-up/</link>
      <pubDate>Fri, 21 Jul 2023 00:37:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/cifs-auto-mount-at-linux-start-up/</guid>
      <description>å‰è¨€ å‰ä¸¤å¤©å†™è¿‡ä¸€ç¯‡ç”¨cifsæŒ‚è½½smbå…±äº«æ–‡ä»¶å¤¹çš„æ–‡ç« ï¼Œä½†é‚£ç¯‡æ–‡ç« ä¸­å¤šæœ‰ç–æ¼ï¼Œæœ¬æ¥ç›´æ¥åœ¨é‚£ç¯‡æ–‡ç« ä¸­updateè¡¥æ¼ä¿®æ­£å°±è¡Œï¼Œä½†æœ€è¿‘æ‡’äº†ï¼Œç›´æ¥æ‹©é‡ç‚¹é‡å†™ä¸€ç¯‡ã€‚
linuxæŒ‚è½½smbå…±äº«æ–‡ä»¶å¤¹æ¶‰åŠåˆ°å¾ˆå¤šæƒé™åˆ†é…çš„è®¾ç½®ï¼Œæ¯”å¦‚smbæœåŠ¡ç«¯è®¾ç½®çš„ç”¨æˆ·å’Œç»„ã€æœ¬åœ°åˆ†é…çš„ç”¨æˆ·å’Œç»„ã€æ˜¯ä¸æ˜¯æŒ‡å®šæ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„é»˜è®¤æƒé™ã€‚å¦‚æœå®åœ¨æä¸æ¸…ï¼Œé‚£å°±ç›´æ¥root:rootå’Œ0777ä¸€æŠŠæ¢­ï¼Œä½†åƒä¸‡è€Œä¸”ä¸€å®šè¦æ„è¯†åˆ°rootå’Œ0777çš„æ½œåœ¨é£é™©ã€‚
è®¾å®š æ³¨æ„ä¸‹é¢å‡ºç°çš„é…ç½®æ–‡ä»¶ä¸­çš„ipåœ°å€ã€ç”¨æˆ·åã€ç»„åã€å¯†ç éƒ½è¦æ ¹æ®è‡ªå·±çš„æƒ…å†µåšä¿®æ”¹ã€‚ğŸ˜„
è®¾å®šæœ¬åœ°ç”¨æˆ·éƒ½æ˜¯jackï¼Œæ‰€å±çš„ç»„æ˜¯jack-group è®¾å®šçš„smbå…±äº«æ–‡ä»¶å¤¹çš„è®¿é—®åœ°å€æ˜¯//192.168.1.1/shareï¼Œè®¿é—®ç”¨æˆ·smbï¼Œè®¿é—®å¯†ç 123456 è®¾å®šæœ¬åœ°æŒ‚è½½smbå…±äº«æ–‡ä»¶å¤¹çš„è·¯å¾„æ˜¯/mnt/share æŒ‚è½½ linuxä¸‹å®‰è£…cifs-utilsåï¼ŒæŒ‚è½½å±€åŸŸç½‘smbå…±äº«æ–‡ä»¶å¤¹ï¼Œæ³¨æ„-oå‚æ•°ä¸­åˆ«å¿˜è®°åŠ ä¸Šiocharset=utf8ä»¥é¿å…ä¸­æ–‡ä¹±ç çš„é—®é¢˜ï¼Œuidå’Œgidç”¨æ¥æŒ‡å®šæŒ‚åœ¨ç›®å½•åˆ†é…çš„ç”¨æˆ·å’Œç»„ã€‚
mount -t cifs //192.168.1.1/share /mnt/share -o username=smb,password=123456,iocharset=utf8,uid=jack,gid=jack-group å–æ¶ˆæŒ‚è½½
umount /mnt/share å¼€æœºè‡ªåŠ¨æŒ‚è½½ ç¼–è¾‘/etc/fstabæ–‡ä»¶ï¼Œæ·»åŠ ä¸€è¡Œï¼š
//192.168.1.1/share /mnt/share cifs credentials=/home/jack/.cifs_creds,file_mode=0755,dir_mode=0755,iocharset=utf8,uid=jack,gid=jack&amp;#39;s_group 0 0 æ³¨æ„ï¼š
smbè®¿é—®è´¦æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå»ºè®®å•ç‹¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶æ¥ä¿å­˜è€Œä¸æ˜¯æ˜æ–‡å†™åœ¨fstabã€‚æˆ‘è¿™é‡Œæ–°å»º/home/jack/.cifs_credsã€‚è®¤è¯æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š username=smb password=123456 # ä¸‹é¢è¿™ä¸€æ å¯ä»¥ä¸è¦ domain=WORKGROUP domainä¸€æ å¯é€‰ï¼Œä¸å¡«çš„è¯ç³»ç»Ÿä¼šè‡ªåŠ¨çŒœï¼ˆæ„å‘³ç€çŒœä¸ä¸­å°±æ— æ³•æŒ‚è½½ï¼‰ï¼Œä¸€èˆ¬é»˜è®¤éƒ½æ˜¯WORKGROUP uid=jack,gid=jack&#39;s_groupï¼Œè¿™æ˜¯æŒ‡å®šæŒ‚è½½çš„smbå…±äº«æ–‡ä»¶å¤¹çš„æœ¬åœ°ç”¨æˆ·å’Œç»„åˆ†é…ç»™è°ã€ç»™å“ªä¸ªç»„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šuidå’Œgidï¼Œé»˜è®¤å°±æ˜¯root:rootã€‚ file_mode=0755,dir_mode=0755ï¼Œè¿™ä¿©å¾ˆå¥½ç†è§£ï¼Œæ–‡ä»¶çš„æƒé™å’Œæ–‡ä»¶å¤¹çš„æƒé™ï¼Œ0755ä»€ä¹ˆæ„æ€ä¸å†èµ˜è¿°ï¼Œä¸æ‡‚å¾—è¯0777ä¸€æŠŠæ¢­ã€‚ iocharset=utf8ç”¨æ¥å¤„ç†ä¸­æ–‡ä¹±ç é—®é¢˜ ç¼–è¾‘å®Œ/etc/fstabï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆï¼š
# é‡è½½ systemctl daemon-reload # é‡æ–°æŒ‚è½½ mount -a OKï¼Œå¤§åŠŸå‘Šæˆ~
ğŸ˜„</description>
    </item>
    
    <item>
      <title>Linuxä¸‹å®‰è£…SambaæœåŠ¡å¼€å¯æ–‡ä»¶å¤¹å…±äº«åŠŸèƒ½</title>
      <link>https://ruohai.wang/202307/samba-setup-to-share-files/</link>
      <pubDate>Sun, 16 Jul 2023 13:15:51 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/samba-setup-to-share-files/</guid>
      <description>å‰è¨€ å±€åŸŸç½‘å¦‚æœé‡Œæœ‰ä¸€å°24å°æ—¶å¼€æœºçš„ä½åŠŸè€—linuxä¸»æœºï¼Œé‚£è‡ªç„¶æ˜¯è¦ç»™å®ƒè£…ä¸Šsambaå¼€å¯æ–‡ä»¶å…±äº«åŠŸèƒ½ï¼ŒæŠŠå®ƒä½œä¸ºä¸€ä¸ªæ–‡ä»¶æœåŠ¡å™¨æ¥ç”¨ã€‚å¯èƒ½æœ‰äººä¼šé—®ï¼Œæƒ³å¼€å…±äº«æ–‡ä»¶å¤¹ï¼Œç›´æ¥ç»™ä¸»æœºè£…casaosä¸å°±å¥½äº†ï¼Œå°±ç®—ä¸ç”¨sambaä¹Ÿå¯ä»¥ç”¨filebrowserã€alistã€dufsã€chfsä¹‹ç±»ã€‚emmmï¼Œè¯´çš„å¾ˆå¯¹ï¼Œä½†é‚£ä¸æ˜¯å°‘äº†å¾ˆå¤šæ‰‹åŠ¨æŒ¡çš„ä¹è¶£å˜›ã€‚è€Œä¸”è‡ªå·±æ‰‹æ“ä¸€è¾¹ï¼Œä¹Ÿæ–¹ä¾¿æ›´å¥½çš„ç†è§£sambaã€‚
åœ¨è®°å½•å®‰è£…å’Œé…ç½®çš„å†…å®¹æ—¶ï¼Œç¡®å®ä¼šå‘ç°å¾ˆå¤šç»†èŠ‚æ²¡æ³•å…·ä½“ä¸€ä¸€è®°å½•ï¼Œåªèƒ½è®°å½•ä¸‹ç¬¦åˆæˆ‘çš„éœ€æ±‚çš„é…ç½®ã€‚è¿™æ—¶å€™å°±ä¼šè§‰å¾—ç±»ä¼¼casaosè¿™ç§webuiä¸Šç›´æ¥é¼ æ ‡ç‚¹ç‚¹å°±å¼€å¯å…±äº«çš„æ–¹å¼æ–¹ä¾¿å¤šäº†ã€‚
å‰æœŸå‡†å¤‡ ä¸€å°24å°æ—¶å¼€æœºçš„ä½åŠŸè€—linuxä¸»æœºï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯èµšé’±å®äºŒä»£ï¼ˆws1508ï¼‰ linuxç³»ç»Ÿæœ‰ä¸€ä¸ªérootçš„ä½æƒé™è´¦æˆ·ï¼Œè¿™é‡Œå‡å®šï¼šjack å¦‚æœç³»ç»Ÿå®‰è£…äº†é˜²ç«å¢™ï¼Œè®°å¾—æ”¾è¡ŒsambaæœåŠ¡ sambaçš„å®‰è£… debianä»“åº“é‡Œå°±æœ‰sambaï¼Œç›´æ¥ä¸€é”®å®‰è£…
apt install samba å®‰è£…å®Œæˆåï¼Œå¯ä»¥æ‰§è¡Œsystemctl status smbdçœ‹ä¸‹æœåŠ¡çš„è¿è¡ŒçŠ¶æ€ã€‚
â— smbd.service - Samba SMB Daemon Loaded: loaded (/lib/systemd/system/smbd.service; enabled; preset: enabled) Active: active (running) since Sun 2023-07-16 13:44:59 CST; 11min ago Docs: man:smbd(8) man:samba(7) man:smb.conf(5) Process: 4040 ExecCondition=/usr/share/samba/is-configured smb (code=exited, status=0/SUCCESS) Process: 4043 ExecStartPre=/usr/share/samba/update-apparmor-samba-profile (code=exited, status=0/SUCCESS) Main PID: 4044 (smbd) Status: &amp;#34;smbd: ready to serve connections...&amp;#34; Tasks: 4 (limit: 986) Memory: 4.9M CPU: 9.725s CGroup: /system.</description>
    </item>
    
    <item>
      <title>Linuxä¸‹å®ç°æŒ‚è½½SMBå…±äº«æ–‡ä»¶å¤¹</title>
      <link>https://ruohai.wang/202307/linux-smb-mount/</link>
      <pubDate>Sat, 15 Jul 2023 14:40:06 +0800</pubDate>
      
      <guid>https://ruohai.wang/202307/linux-smb-mount/</guid>
      <description>linuxä¸‹è®¿é—®å±€åŸŸç½‘ä¸Šçš„smbå…±äº«æ–‡ä»¶å¤¹ï¼Œéœ€è¦å®‰è£…cifs-utilsã€‚
apt install cifs-utils è¿™é‡Œå‡å®šå…±äº«æ–‡ä»¶å¤¹çš„ç½‘ç»œä½ç½®æ˜¯http://smb_ip/shareï¼Œç”¨æˆ·åsmbï¼Œå¯†ç 123456ã€‚
mount -t cifs //smb_ip/share /mnt/share -o username=smb,password=123456 -t cifsï¼ŒæŒ‚è½½çš„æ–‡ä»¶ç±»å‹ï¼Œsmbä¸º-t cifsã€‚ //smb_ip/shareï¼Œsmbå…±äº«æ–‡ä»¶å¤¹çš„ç½‘ç»œä½ç½® /mnt/shareï¼Œæœ¬åœ°æŒ‚è½½çš„ä½ç½® -oï¼Œ-oåé¢è·Ÿçš„éƒ½æ˜¯æŒ‚è½½çš„è¯¦ç»†å‚æ•°é…ç½®ï¼Œsmbåè®®ã€ç”¨æˆ·åã€å¯†ç ç­‰ç­‰ï¼Œå…·ä½“å¯ä»¥çœ‹è¿™é‡Œè¯¦ç»†å‚æ•°è§£é‡Šï¼Œæˆ–è€…çœ‹å›¾ç‰‡ã€‚ å¦‚æœè¦è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½smbï¼Œåœ¨/etc/fstabæ–‡ä»¶ä¸­æ·»åŠ ä¸€è¡Œï¼Œä¿å­˜é€€å‡ºå³å¯ã€‚
//smb_ip/share /mnt/share cifs username=smb,passwd=123456 0 0 ä¹Ÿå¯ä»¥åœ¨/etc/samba/ç›®å½•ä¸‹æ–°å»ºé…ç½®æ–‡ä»¶smbpasswdç”¨æ¥ä¿å­˜smbçš„ç”¨æˆ·åå’Œå¯†ç ä»¥æ–¹ä¾¿ç®¡ç†ï¼Œå†…å®¹å¦‚ä¸‹ã€‚
username=smb password=123456 ç„¶å fstabä¸­æ·»åŠ ä¸€è¡Œ
//smb_ip/share /mnt/share cifs credentials=/etc/samba/smbpasswd 0 0 fstabçš„æ ¼å¼è§„èŒƒå¦‚ä¸‹
&amp;lt;file system&amp;gt; &amp;lt;dir&amp;gt; &amp;lt;type&amp;gt; &amp;lt;options&amp;gt; &amp;lt;dump&amp;gt; &amp;lt;pass&amp;gt; </description>
    </item>
    
  </channel>
</rss>
