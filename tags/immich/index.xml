<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Immich on 喵ฅ^•ﻌ•^ฅ</title>
    <link>https://ruohai.wang/tags/immich/</link>
    <description>Recent content in Immich on 喵ฅ^•ﻌ•^ฅ</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 06 Oct 2023 19:34:41 +0800</lastBuildDate><atom:link href="https://ruohai.wang/tags/immich/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Immich配置SSL证书开启HTTPS访问</title>
      <link>https://ruohai.wang/202310/immich-update-to-https/</link>
      <pubDate>Fri, 06 Oct 2023 19:34:41 +0800</pubDate>
      
      <guid>https://ruohai.wang/202310/immich-update-to-https/</guid>
      <description>注意事项 配置ssl证书开启https公网访问，请务必注意数据安全。
immich服务目前没有密码错误多次登录时触发登录保护的功能，所以存在暴力破解的可能性。
建议用tailscale、ngrok、frp、cloudflare tunnel之类内网穿透工具。
第一步：申请证书 申请证书这里不做赘述，阿里云送的免费证书，或者let&amp;rsquo;s encrypt的证书都可以。
我用的反代工具是nginx，所以证书是是nginx格式。
一共两个文件:
domain.key domain.pem 第二步：安装nginx 我用的系统是debian，直接apt安装
apt install nginx nginx安装好以后，默认配置文件路径/etc/nginx。
如果没有这个目录，执行以下命令，会显示nginx的配置文件路径
nginx -t 第三步：上传证书 在/etc/nginx目录下新建文件夹ssl，然后用工具（比如winscp/sftp等）把两个ssl证书文件放到ssl目录下。
最终ssl证书的路径如下：
/etc/nginx/ssl/domain.key /etc/nginx/ssl/domain.pem 第四步：配置反代 进入目录/etc/nginx/sites-available，把默认的default配置文件备份，新建一个default文件。
# 进目录 cd /etc/nginx/sites-available # 备份 mv default default.bak # 新建 touch default 如果不懂为啥，就根据这个操作，如果懂，就根据自己的习惯操作。
用编辑器编辑default文件，录入一下内容，保存后退出。假定新端口是12345。
server { # 监听端口 12345 listen 12345 ssl; listen [::]:12345 ssl; # 服务名 server_name domain; # 因为需要上传照片视频，这里设定最大上传文件50GB client_max_body_size 50000M; # ssl证书路径 ssl_certificate ssl/domain.pem; ssl_certificate_key ssl/domain.key; # ssl session缓存和时间 ssl_session_cache shared:SSL:1m; ssl_session_timeout 5m; # ssl加密的相关配置 ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!</description>
    </item>
    
    <item>
      <title>开源自托管相册服务Immich的安装</title>
      <link>https://ruohai.wang/202310/immich-installation/</link>
      <pubDate>Thu, 05 Oct 2023 16:35:47 +0800</pubDate>
      
      <guid>https://ruohai.wang/202310/immich-installation/</guid>
      <description>前言 十多年来我用的相册服务一直都是google photos，大厂背书，早期宣传永久免费无限空间，而且也好用，往年今日、图像识别、关键字搜索，各种功能都很好用而且方便，如果gfw对你来说不是问题，这就是最好的方案。
不过很快它的权益就开始缩水，从原图永久免费空间，缩到高品质永久免费空间，缩到免费15GB空间。直到这两天，我发现gmail、driver、photos三者共用15GB空间，如果不续费，在空间耗尽的情况下，gmail都无法使用，因为没有空间来收发邮件了。
虽然可以用过订阅google one扩充空间，但我不喜欢这种被比较恶心的全家桶订阅制绑架用户的方案，尤其是当邮箱服务使用gmail，根本无法短时间之内迁移，迫使你不得不在清空photos腾出空间和花钱订阅之间二选一。
其实前几个月开始玩nas的时候就有考虑自建相册服务，很多方案，比如photo prism、piwigo、lychee、mt-photos、librephotos，但一直没有动手。因为这些方案对我来说都有几个比较致命的点：
无法使用原图片目录，需要通过【导入】重新存一份 不支持heic 相比起以上两点，其它的功能确实比如人脸识别、关键字搜索我都可以忽略不计。
但因为这几天被google one订阅之恶心到了，必须开始搞自建相册。
这篇文章记录下immich相册的安装过程。
安装 我的安装环境是debian 12 stable（bookworm）。权限、用户相关问题这里不多做标注，需自行解决。
immich的安装步骤在【官网】有文档，英语阅读无障碍的话可以直接看官网。
第一步：安装docker和docker compose。 apt install docker.io apt install docker-compose 第二步：在本地创建immich安装目录 mkdir immich cd immich 第三步：在immich目录下载安装所需文件 wget https://github.com/immich-app/immich/releases/latest/download/docker-compose.yml wget -O .env https://github.com/immich-app/immich/releases/latest/download/example.env 第四步：编辑.env文件。下载的默认.env文件内容如下所示。 # You can find documentation for all the supported env variables at https://immich.app/docs/install/environment-variables # The location where your uploaded files are stored UPLOAD_LOCATION=./library # The Immich version to use. You can pin this to a specific version like &amp;#34;v1.</description>
    </item>
    
  </channel>
</rss>
