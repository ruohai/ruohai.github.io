<!doctype html>
<html lang="en-us">
  <head>
    <title>Linux下用Speedtest CLI进行网络测速 // 喵ฅ^•ﻌ•^ฅ</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.111.3">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Ruohai Wang" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.bbae4e4a160fe6ef61e422c4df808f31e024fd335c6703e79b07c797022fe282.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux下用Speedtest CLI进行网络测速"/>
<meta name="twitter:description" content="前言 想要linux下测一下网速，机器是赚钱宝二代（ws1508），硬件是32位armv7，系统是armbian-bookworm。
debian的仓库里有一个speedtest-cli的包，一开始我用的就是这个。但注意这个包不是speedtest官方在维护，不是官方的！这也解释了为什么我之前用debian仓库里的speedtest-cli进行测速的时候，它自动选择的服务器都是hongkong或者taiwan，导致测速完全不准。而且通过命令speedtest --list|grep China也搜不出任何结果，一度离谱到speedtest --list出来只有taiwan的服务器。
后来网上搜了一圈【找到了原因】，才知道这个包不是speedtest官方的。
linux上真的是好多坑啊，一个简单的网络测速都是如此。
好了，现在记录一下怎么安装speedtest官方的工具来完成linux下的网络测速。
安装 找到【speedtest官方网站】，首页就有安装步骤。 # 下载sh脚本 curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash # 安装 apt install speedtest 查询可用的测速服务器 先speedtest -h看一下使用手册。 Usage: speedtest [&lt;options&gt;] -h, --help Print usage information -V, --version Print version number -L, --servers List nearest servers -s, --server-id=# Specify a server from the server list using its id -I, --interface=ARG Attempt to bind to the specified interface when connecting to servers -i, --ip=ARG Attempt to bind to the specified IP address when connecting to servers -o, --host=ARG Specify a server, from the server list, using its host&#39;s fully qualified domain name -p, --progress=yes|no Enable or disable progress bar (Note: only available for &#39;human-readable&#39; or &#39;json&#39; and defaults to yes when interactive) -P, --precision=# Number of decimals to use (0-8, default=2) -f, --format=ARG Output format (see below for valid formats) --progress-update-interval=# Progress update interval (100-1000 milliseconds) -u, --unit[=ARG] Output unit for displaying speeds (Note: this is only applicable for ‘human-readable’ output format and the default unit is Mbps) -a Shortcut for [-u auto-decimal-bits] -A Shortcut for [-u auto-decimal-bytes] -b Shortcut for [-u auto-binary-bits] -B Shortcut for [-u auto-binary-bytes] --selection-details Show server selection details --ca-certificate=ARG CA Certificate bundle path -v Logging verbosity."/>

    <meta property="og:title" content="Linux下用Speedtest CLI进行网络测速" />
<meta property="og:description" content="前言 想要linux下测一下网速，机器是赚钱宝二代（ws1508），硬件是32位armv7，系统是armbian-bookworm。
debian的仓库里有一个speedtest-cli的包，一开始我用的就是这个。但注意这个包不是speedtest官方在维护，不是官方的！这也解释了为什么我之前用debian仓库里的speedtest-cli进行测速的时候，它自动选择的服务器都是hongkong或者taiwan，导致测速完全不准。而且通过命令speedtest --list|grep China也搜不出任何结果，一度离谱到speedtest --list出来只有taiwan的服务器。
后来网上搜了一圈【找到了原因】，才知道这个包不是speedtest官方的。
linux上真的是好多坑啊，一个简单的网络测速都是如此。
好了，现在记录一下怎么安装speedtest官方的工具来完成linux下的网络测速。
安装 找到【speedtest官方网站】，首页就有安装步骤。 # 下载sh脚本 curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash # 安装 apt install speedtest 查询可用的测速服务器 先speedtest -h看一下使用手册。 Usage: speedtest [&lt;options&gt;] -h, --help Print usage information -V, --version Print version number -L, --servers List nearest servers -s, --server-id=# Specify a server from the server list using its id -I, --interface=ARG Attempt to bind to the specified interface when connecting to servers -i, --ip=ARG Attempt to bind to the specified IP address when connecting to servers -o, --host=ARG Specify a server, from the server list, using its host&#39;s fully qualified domain name -p, --progress=yes|no Enable or disable progress bar (Note: only available for &#39;human-readable&#39; or &#39;json&#39; and defaults to yes when interactive) -P, --precision=# Number of decimals to use (0-8, default=2) -f, --format=ARG Output format (see below for valid formats) --progress-update-interval=# Progress update interval (100-1000 milliseconds) -u, --unit[=ARG] Output unit for displaying speeds (Note: this is only applicable for ‘human-readable’ output format and the default unit is Mbps) -a Shortcut for [-u auto-decimal-bits] -A Shortcut for [-u auto-decimal-bytes] -b Shortcut for [-u auto-binary-bits] -B Shortcut for [-u auto-binary-bytes] --selection-details Show server selection details --ca-certificate=ARG CA Certificate bundle path -v Logging verbosity." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ruohai.wang/202307/speedtest-cli-setup/" /><meta property="article:section" content="202307" />
<meta property="article:published_time" content="2023-07-14T14:57:37+08:00" />
<meta property="article:modified_time" content="2023-07-14T14:57:37+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://ruohai.wang/"><img class="app-header-avatar" src="/avatar.jpg" alt="Ruohai Wang" /></a>
      <span class="app-header-title">喵ฅ^•ﻌ•^ฅ</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">主页</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">标签</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">关于</a>
      </nav>
      <p>这种失落会持久吗~</p>
      <div class="app-header-social">
        
          <a href="https://twitter.com/ruohai" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Linux下用Speedtest CLI进行网络测速</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 14, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://ruohai.wang/tags/linux/">Linux</a>
              <a class="tag" href="https://ruohai.wang/tags/speedtest/">Speedtest</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <h2 id="前言">前言</h2>
<p>想要linux下测一下网速，机器是赚钱宝二代（ws1508），硬件是32位armv7，系统是armbian-bookworm。</p>
<p>debian的仓库里有一个<code>speedtest-cli</code>的包，一开始我用的就是这个。但注意这个包不是speedtest官方在维护，不是官方的！这也解释了为什么我之前用debian仓库里的speedtest-cli进行测速的时候，它自动选择的服务器都是hongkong或者taiwan，导致测速完全不准。而且通过命令<code>speedtest --list|grep China</code>也搜不出任何结果，一度离谱到<code>speedtest --list</code>出来只有taiwan的服务器。</p>
<p>后来网上搜了一圈【<a href="https://www.reddit.com/r/commandline/comments/x2hv2o/speedtestcli_list_returns_only_10_servers/">找到了原因</a>】，才知道这个包不是speedtest官方的。</p>
<p>linux上真的是好多坑啊，一个简单的网络测速都是如此。</p>
<p>好了，现在记录一下怎么安装speedtest官方的工具来完成linux下的网络测速。</p>
<hr>
<h2 id="安装">安装</h2>
<ul>
<li>找到【<a href="https://www.speedtest.net/apps/cli">speedtest官方网站</a>】，首页就有安装步骤。</li>
</ul>
<pre tabindex="0"><code># 下载sh脚本
curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash
# 安装
apt install speedtest
</code></pre><hr>
<h2 id="查询可用的测速服务器">查询可用的测速服务器</h2>
<ol>
<li>先<code>speedtest -h</code>看一下使用手册。</li>
</ol>
<pre tabindex="0"><code>Usage: speedtest [&lt;options&gt;]
  -h, --help                        Print usage information
  -V, --version                     Print version number
  -L, --servers                     List nearest servers
  -s, --server-id=#                 Specify a server from the server list using its id
  -I, --interface=ARG               Attempt to bind to the specified interface when connecting to servers
  -i, --ip=ARG                      Attempt to bind to the specified IP address when connecting to servers
  -o, --host=ARG                    Specify a server, from the server list, using its host&#39;s fully qualified domain name
  -p, --progress=yes|no             Enable or disable progress bar (Note: only available for &#39;human-readable&#39;
                                    or &#39;json&#39; and defaults to yes when interactive)
  -P, --precision=#                 Number of decimals to use (0-8, default=2)
  -f, --format=ARG                  Output format (see below for valid formats)
      --progress-update-interval=#  Progress update interval (100-1000 milliseconds)
  -u, --unit[=ARG]                  Output unit for displaying speeds (Note: this is only applicable
                                    for ‘human-readable’ output format and the default unit is Mbps)
  -a                                Shortcut for [-u auto-decimal-bits]
  -A                                Shortcut for [-u auto-decimal-bytes]
  -b                                Shortcut for [-u auto-binary-bits]
  -B                                Shortcut for [-u auto-binary-bytes]
      --selection-details           Show server selection details
      --ca-certificate=ARG          CA Certificate bundle path
  -v                                Logging verbosity. Specify multiple times for higher verbosity
      --output-header               Show output header for CSV and TSV formats
</code></pre><ol start="2">
<li>用<code>-L</code>参数查看附近可用的测速服务器列表，这里以杭州为例。</li>
</ol>
<pre tabindex="0"><code>speedtest -L|grep Hangzhou
</code></pre><ol start="3">
<li>终端里会展示杭州的测速服务器。记住第一个数字编号54312就是这个测速服务器的ID，下面要用。</li>
</ol>
<pre tabindex="0"><code> 54312  China Mobile Zhejiang 5G       Hangzhou             China
</code></pre><ol start="4">
<li>也可以不限定城市，直接用<code>speedtest -L</code>展示附近所有可用的服务器。</li>
</ol>
<pre tabindex="0"><code>Closest servers:

    ID  Name                           Location             Country
==============================================================================
 54312  China Mobile Zhejiang 5G       Hangzhou             China
  5396  China Telecom JiangSu 5G       Suzhou               China
 45170  China Unicom                   Wu Xi                China
 30852  Duke Kunshan University        Kunshan              China
 24447  China Unicom 5G                ShangHai             China
  3633  China Telecom                  Shanghai             China
 36663  China Telecom JiangSu 5G       Zhenjiang            China
 26352  China Telecom JiangSu 5G       Nanjing              China
  5317  江苏电信5G                 Yangzhou             China
 17145  China Telecom AnHui 5G         Hefei                China
</code></pre><hr>
<h2 id="测速">测速</h2>
<ol>
<li>开始测速，参数是<code>-s</code></li>
</ol>
<pre tabindex="0"><code> speedtest -s 54312
</code></pre><ol start="2">
<li>如果是第一次使用speedtest，这时候会出现一个用户协议，需要输入<code>yes</code>来确认。</li>
</ol>
<pre tabindex="0"><code>==============================================================================

You may only use this Speedtest software and information generated
from it for personal, non-commercial use, through a command line
interface on a personal computer. Your use of this software is subject
to the End User License Agreement, Terms of Use and Privacy Policy at
these URLs:

        https://www.speedtest.net/about/eula
        https://www.speedtest.net/about/terms
        https://www.speedtest.net/about/privacy

==============================================================================

Do you accept the license? [type YES to accept]:
</code></pre><ol start="3">
<li>测速结束以后会显示结果</li>
</ol>
<pre tabindex="0"><code>      Server: China Mobile Zhejiang 5G - Hangzhou (id: 54312)
         ISP: China Mobile
Idle Latency:     3.17 ms   (jitter: 0.08ms, low: 3.06ms, high: 3.26ms)
    Download:    94.71 Mbps (data used: 45.0 MB)
                 13.59 ms   (jitter: 1.43ms, low: 6.14ms, high: 20.92ms)
      Upload:    64.80 Mbps (data used: 110.5 MB)
                 40.08 ms   (jitter: 43.70ms, low: 2.07ms, high: 872.28ms)
 Packet Loss:     0.0%
</code></pre><ol start="4">
<li>展示的信息中除了测速结果之外，还会提供一个查看网址。因为根据用户协议，测速信息都会上传到speedtest官方，浏览器中打开网址可以看到图文并茂的测速信息。</li>
</ol>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
