<!doctype html>
<html lang="en-us">
  <head>
    <title>Linux下安装Navidrome自建流媒体服务 // 喵ฅ^•ﻌ•^ฅ</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.111.3">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Ruohai Wang" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.a1b52f3f0f66f76e3e8d87d00f7f9c19c4aee8a2e78f448f384a2759833ae017.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Linux下安装Navidrome自建流媒体服务"/>
<meta name="twitter:description" content="navidrome，开源的流媒体服务器，全平台客户端都有。功能和群晖的audio station一样，但首先不是人人都有群晖，其次有群晖的人也不一定都喜欢群晖那个沙雕的audio station。
这里记录下安装步骤。其实官网的安装教程已经非常完整且详细，只是没有中文版而已。英文阅读没问题的可以直接看【官方安装教程】。这里仅做一个自己安装过程的记录和英译中。有人会问navidrome不是支持docker安装吗而且docker安装很简单，STOP！我不喜欢docker，所以选择自己手搓。
好了，让我们开始安装navidrome吧！
第一步：安装ffmpeg（大概500MB）
apt install ffmpeg -y 第二步：创建navidrome的安装文件夹和运行文件夹并分配用户和组。对的，这一步就要想好运行navidrome要分配的权限了，怕麻烦就root一把梭。这里用户和组我们都用jack。文件夹路径可以自定义，只是后面的配置过程中同步修改为自定义路径即可。
install -d -o jack -g jack /opt/navidrome install -d -o jack -g jack /var/lib/navidrome 第三步：进入/opt/navidrome，到官方github下载对应自己硬件平台版本的安装包，我这里以amd64版本为例，解压并分配权限。
cd /opt/navidrome wget https://github.com/navidrome/navidrome/releases/download/v0.49.3/navidrome_0.49.3_Linux_arm64.tar.gz tar -zxvf navidrome_0.49.3_Linux_arm64.tar.gz chown -R jack:jack /opt/navidrome 第四步：在/var/lib/navidrome目录下创建配置文件navidrome.toml，配置参数。默认只有一句，用来指定音乐的源文件路径。更多自定义参数看【官方页面】。
MusicFolder = &#34;/media/music&#34; 注意配置这个媒体源文件夹的用户权限，如果弄不清就照样分配给jack。
chown -R jack:jack /media/music 第五步：到这一步其实已经算大功告成了，接下去只是把navidrome添加到系统服务并设置开机自启。在/etc/systemd/system目录下新建navidrome.service文件，然后添加配置信息。注意参数中的User和Group两个参数对应的值要改成你自己的值。其它参数默认即可，如果你能看懂参数也可以自行修改。
[Unit] Description=Navidrome Music Server and Streamer compatible with Subsonic/Airsonic After=remote-fs.target network.target AssertPathExists=/var/lib/navidrome [Install] WantedBy=multi-user.target [Service] User=jack Group=jack Type=simple ExecStart=/opt/navidrome/navidrome --configfile &#34;/var/lib/navidrome/navidrome.toml&#34; WorkingDirectory=/var/lib/navidrome TimeoutStopSec=20 KillMode=process Restart=on-failure # See https://www."/>

    <meta property="og:title" content="Linux下安装Navidrome自建流媒体服务" />
<meta property="og:description" content="navidrome，开源的流媒体服务器，全平台客户端都有。功能和群晖的audio station一样，但首先不是人人都有群晖，其次有群晖的人也不一定都喜欢群晖那个沙雕的audio station。
这里记录下安装步骤。其实官网的安装教程已经非常完整且详细，只是没有中文版而已。英文阅读没问题的可以直接看【官方安装教程】。这里仅做一个自己安装过程的记录和英译中。有人会问navidrome不是支持docker安装吗而且docker安装很简单，STOP！我不喜欢docker，所以选择自己手搓。
好了，让我们开始安装navidrome吧！
第一步：安装ffmpeg（大概500MB）
apt install ffmpeg -y 第二步：创建navidrome的安装文件夹和运行文件夹并分配用户和组。对的，这一步就要想好运行navidrome要分配的权限了，怕麻烦就root一把梭。这里用户和组我们都用jack。文件夹路径可以自定义，只是后面的配置过程中同步修改为自定义路径即可。
install -d -o jack -g jack /opt/navidrome install -d -o jack -g jack /var/lib/navidrome 第三步：进入/opt/navidrome，到官方github下载对应自己硬件平台版本的安装包，我这里以amd64版本为例，解压并分配权限。
cd /opt/navidrome wget https://github.com/navidrome/navidrome/releases/download/v0.49.3/navidrome_0.49.3_Linux_arm64.tar.gz tar -zxvf navidrome_0.49.3_Linux_arm64.tar.gz chown -R jack:jack /opt/navidrome 第四步：在/var/lib/navidrome目录下创建配置文件navidrome.toml，配置参数。默认只有一句，用来指定音乐的源文件路径。更多自定义参数看【官方页面】。
MusicFolder = &#34;/media/music&#34; 注意配置这个媒体源文件夹的用户权限，如果弄不清就照样分配给jack。
chown -R jack:jack /media/music 第五步：到这一步其实已经算大功告成了，接下去只是把navidrome添加到系统服务并设置开机自启。在/etc/systemd/system目录下新建navidrome.service文件，然后添加配置信息。注意参数中的User和Group两个参数对应的值要改成你自己的值。其它参数默认即可，如果你能看懂参数也可以自行修改。
[Unit] Description=Navidrome Music Server and Streamer compatible with Subsonic/Airsonic After=remote-fs.target network.target AssertPathExists=/var/lib/navidrome [Install] WantedBy=multi-user.target [Service] User=jack Group=jack Type=simple ExecStart=/opt/navidrome/navidrome --configfile &#34;/var/lib/navidrome/navidrome.toml&#34; WorkingDirectory=/var/lib/navidrome TimeoutStopSec=20 KillMode=process Restart=on-failure # See https://www." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ruohai.wang/posts/navidrome-setup/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-15T00:28:12+08:00" />
<meta property="article:modified_time" content="2023-07-15T00:28:12+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://ruohai.wang/"><img class="app-header-avatar" src="/avatar.jpg" alt="Ruohai Wang" /></a>
      <span class="app-header-title">喵ฅ^•ﻌ•^ฅ</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">主页</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">关于</a>
      </nav>
      <p>这种失落会持久吗~</p>
      <div class="app-header-social">
        
          <a href="https://twitter.com/ruohai" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Linux下安装Navidrome自建流媒体服务</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 15, 2023
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
      </div>
    </header>
    <div class="post-content">
      <p>navidrome，开源的流媒体服务器，全平台客户端都有。功能和群晖的audio station一样，但首先不是人人都有群晖，其次有群晖的人也不一定都喜欢群晖那个沙雕的audio station。</p>
<p>这里记录下安装步骤。其实官网的安装教程已经非常完整且详细，只是没有中文版而已。英文阅读没问题的可以直接看【<a href="https://www.navidrome.org/docs/installation/linux/">官方安装教程</a>】。这里仅做一个自己安装过程的记录和英译中。有人会问navidrome不是支持docker安装吗而且docker安装很简单，STOP！我不喜欢docker，所以选择自己手搓。</p>
<p>好了，让我们开始安装navidrome吧！</p>
<p>第一步：安装ffmpeg（大概500MB）</p>
<pre tabindex="0"><code>apt install ffmpeg -y
</code></pre><p>第二步：创建navidrome的安装文件夹和运行文件夹并分配用户和组。对的，这一步就要想好运行navidrome要分配的权限了，怕麻烦就root一把梭。这里用户和组我们都用jack。文件夹路径可以自定义，只是后面的配置过程中同步修改为自定义路径即可。</p>
<pre tabindex="0"><code>install -d -o jack -g jack /opt/navidrome
install -d -o jack -g jack /var/lib/navidrome
</code></pre><p>第三步：进入/opt/navidrome，到官方github下载对应自己硬件平台版本的安装包，我这里以amd64版本为例，解压并分配权限。</p>
<pre tabindex="0"><code>cd /opt/navidrome
wget https://github.com/navidrome/navidrome/releases/download/v0.49.3/navidrome_0.49.3_Linux_arm64.tar.gz
tar -zxvf navidrome_0.49.3_Linux_arm64.tar.gz
chown -R jack:jack /opt/navidrome
</code></pre><p>第四步：在/var/lib/navidrome目录下创建配置文件navidrome.toml，配置参数。默认只有一句，用来指定音乐的源文件路径。更多自定义参数看【<a href="https://www.navidrome.org/docs/usage/configuration-options/">官方页面</a>】。</p>
<pre tabindex="0"><code>MusicFolder = &#34;/media/music&#34;
</code></pre><p>注意配置这个媒体源文件夹的用户权限，如果弄不清就照样分配给jack。</p>
<pre tabindex="0"><code>chown -R jack:jack /media/music
</code></pre><p>第五步：到这一步其实已经算大功告成了，接下去只是把navidrome添加到系统服务并设置开机自启。在<code>/etc/systemd/system</code>目录下新建<code>navidrome.service</code>文件，然后添加配置信息。注意参数中的<code>User</code>和<code>Group</code>两个参数对应的值要改成你自己的值。其它参数默认即可，如果你能看懂参数也可以自行修改。</p>
<pre tabindex="0"><code>[Unit]
Description=Navidrome Music Server and Streamer compatible with Subsonic/Airsonic
After=remote-fs.target network.target
AssertPathExists=/var/lib/navidrome

[Install]
WantedBy=multi-user.target

[Service]
User=jack
Group=jack
Type=simple
ExecStart=/opt/navidrome/navidrome --configfile &#34;/var/lib/navidrome/navidrome.toml&#34;
WorkingDirectory=/var/lib/navidrome
TimeoutStopSec=20
KillMode=process
Restart=on-failure

# See https://www.freedesktop.org/software/systemd/man/systemd.exec.html
DevicePolicy=closed
NoNewPrivileges=yes
PrivateTmp=yes
PrivateUsers=yes
ProtectControlGroups=yes
ProtectKernelModules=yes
ProtectKernelTunables=yes
RestrictAddressFamilies=AF_UNIX AF_INET AF_INET6
RestrictNamespaces=yes
RestrictRealtime=yes
SystemCallFilter=~@clock @debug @module @mount @obsolete @reboot @setuid @swap
ReadWritePaths=/var/lib/navidrome

# You can uncomment the following line if you&#39;re not using the jukebox This
# will prevent navidrome from accessing any real (physical) devices
#PrivateDevices=yes

# You can change the following line to `strict` instead of `full` if you don&#39;t
# want navidrome to be able to write anything on your filesystem outside of
# /var/lib/navidrome.
ProtectSystem=full

# You can uncomment the following line if you don&#39;t have any media in /home/*.
# This will prevent navidrome from ever reading/writing anything there.
#ProtectHome=true

# You can customize some Navidrome config options by setting environment variables here. Ex:
#Environment=ND_BASEURL=&#34;/navidrome&#34;
</code></pre><p>第六步：三条命令。</p>
<pre tabindex="0"><code># 重新载入服务配置信息
systemctl daemon-reload
# 启动navidrome
systemctl start navidrome.service
# 查看navidrome运行状态
systemctl status navidrome.service
</code></pre><p>成功启动的话，就可以在浏览器中访问http://localhost:4533开始使用navidrome了。</p>
<p>第七步：最后一步，把navidrome添加到开机启动服务</p>
<pre tabindex="0"><code>systemctl enable navidrome.service
</code></pre>
    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
