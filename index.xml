<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>限盐少许</title>
    <link>https://ruohai.wang/</link>
    <description>Recent content on 限盐少许</description>
    <generator>Hugo -- gohugo.io</generator>
    <lastBuildDate>Fri, 14 Jul 2023 15:15:15 +0800</lastBuildDate><atom:link href="https://ruohai.wang/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>用Hugo搭建博客并部署到Github Pages</title>
      <link>https://ruohai.wang/posts/hugo-setup-and-deploy-to-github/</link>
      <pubDate>Fri, 14 Jul 2023 15:15:15 +0800</pubDate>
      
      <guid>https://ruohai.wang/posts/hugo-setup-and-deploy-to-github/</guid>
      <description>前言 手上好几台armv7平台的电子垃圾，没错说的就是迅雷赚钱宝二代（ws1508）和迅雷玩客云（ws1608）。总琢磨着让这些电子垃圾在它们的生命末期发挥最后的光和热，给它们刷armbian、刷openwrt。正好我的搬瓦工vps还剩半个月要到期了，49.99刀/年的费用，对于现在的我也算是一笔不小的支出。能省则省，所以准备博客搬家。有很多捡垃圾玩家会把博客跑在自己的arm小主机上，但国内的网络环境下，自建服务器的备案和80/443端口解封根本无解，只能做到url:port进行公网访问，但这纯粹就是自娱自乐嘛。最后还是决定把博客部署到免费的github pages。
既然要用github pages，那只能用静态博客，无论是hexo、hugo还是jekyll，都需要一个本地的编译环境。既然如此，正好尝试一下在赚钱宝二代（ws1508）这台设备上安装hugo。
玩客云（ws1608）和赚钱宝二代（ws1508）主要硬件配置上一模一样，同样适用这个教程。
其实全平台都适用这个教程，只需要把apt install换成自己系统的版本就行了。
前期准备 一台功能正常的电脑/主机，linux/windows/macos/&amp;hellip;。赚钱宝二代的硬件是32位armv7，系统是armbian-bookworn github账号，假定用户名jack，并新建repo取名为jack.github.io 安装hugo 安装git apt install git 安装hugo。在armbian-bookworm的仓库里有hugo，在当下这个日期（2023-07-14），仓库里的hugo版本是v0.111.3，是2023年3月发布的。github hugo官方仓库的版本已经是v0.115.3。虽然都说喜新厌旧，但这不是巧了么，我就用armbian仓库的旧版。 apt install hugo 创建博客目录，下载主题 # 为方便管理在根目录新建data文件夹mkdir /data# 在data目录下创建博客目录cd data/hugo new site blog# 进入blog目录，进行git初始化cd blog/git init# 下载自己喜欢的主题（这里用m10c为例）git clone https://github.com/vaga/hugo-theme-m10c.git themes/m10c 编辑博客根目录的config.toml，添加一行。注意这里v0.111.3版本的hugo配置文件是config.toml，但v0.115.3版本的配置文件是hugo.toml。 theme = &amp;#39;m10c&amp;#39; 到这一步，本地hugo安装就算完成了。接下去是进行本地运行和预览。从这一步开始我碰到了不少的坑，本来30分钟就搞定的事情，我愣是折腾了几个小时，弄了一个通宵。这都是在我决定要用ssh在armv7电子垃圾上装hugo的那一刻就注定了的。天堂有路你不走，地狱无门你偏要闯。😔 本地运行和预览 预览主题。如果是本地安装hugo，然后本地运行本地预览，那网上的教程多如牛毛，都会教你敲命令hugo server然后打开浏览器输入http://localhost:1313就可以预览了。但很不巧，我是用局域网内其它机器预览。所以从这一步开始就有了区别。注意参数--bind=&amp;quot;0.0.0.0&amp;quot;用来监听局域网内的访问，下面这条命令执行成功以后，就可以浏览器中访问http://host_ip:1313进行主题预览了。 hugo server --bind=&amp;#34;0.0.0.0&amp;#34; 写文章。用下面这条命令创建markdown文档，然后用自己喜欢的文本编辑器（nano/vim/&amp;hellip;）打开它写内容。这里有一个坑，根据模板创建的markdown文档的头部信息里有个参数draft: true用来标记这个文档是一份草稿。注意啊，它标记了自己是草稿，不是正式文章，下面要考。 hugo new posts/hello-world.md 预览文章。网上的教程在这一步都会说执行hugo server，但是要注意，文章的头部信息里draft: true标记了它是一篇草稿，默认不会展示。所以想要看到文章，要么改头部信息draft: false，要么命令加上-D参数，这样它会把草稿也进行展示。我的建议是改文章头部信息draft: false，这样后面发布到github pages的时候就不会踩坑了。 hugo server --bind=&amp;#34;0.</description>
    </item>
    
    <item>
      <title>Linux下用Speedtest CLI进行网络测速</title>
      <link>https://ruohai.wang/posts/speedtest-cli-setup/</link>
      <pubDate>Fri, 14 Jul 2023 14:57:37 +0800</pubDate>
      
      <guid>https://ruohai.wang/posts/speedtest-cli-setup/</guid>
      <description>前言 想要linux下测一下网速，机器是赚钱宝二代（ws1508），硬件是32位armv7，系统是armbian-bookworm。
debian的仓库里有一个speedtest-cli的包，一开始我用的就是这个。但注意这个包不是speedtest官方在维护，不是官方的！这也解释了为什么我之前用debian仓库里的speedtest-cli进行测速的时候，它自动选择的服务器都是hongkong或者taiwan，导致测速完全不准。而且通过命令speedtest --list|grep China也搜不出任何结果，一度离谱到speedtest --list出来只有taiwan的服务器。
后来网上搜了一圈【找到了原因】，才知道这个包不是speedtest官方的。
linux上真的是好多坑啊，一个简单的网络测速都是如此。
好了，现在记录一下怎么安装speedtest官方的工具来完成linux下的网络测速。
安装 找到【speedtest官方网站】，首页就有安装步骤。 # 下载sh脚本 curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | sudo bash # 安装 apt install speedtest 查询可用的测速服务器 先speedtest -h看一下使用手册。 Usage: speedtest [&amp;lt;options&amp;gt;] -h, --help Print usage information -V, --version Print version number -L, --servers List nearest servers -s, --server-id=# Specify a server from the server list using its id -I, --interface=ARG Attempt to bind to the specified interface when connecting to servers -i, --ip=ARG Attempt to bind to the specified IP address when connecting to servers -o, --host=ARG Specify a server, from the server list, using its host&amp;#39;s fully qualified domain name -p, --progress=yes|no Enable or disable progress bar (Note: only available for &amp;#39;human-readable&amp;#39; or &amp;#39;json&amp;#39; and defaults to yes when interactive) -P, --precision=# Number of decimals to use (0-8, default=2) -f, --format=ARG Output format (see below for valid formats) --progress-update-interval=# Progress update interval (100-1000 milliseconds) -u, --unit[=ARG] Output unit for displaying speeds (Note: this is only applicable for ‘human-readable’ output format and the default unit is Mbps) -a Shortcut for [-u auto-decimal-bits] -A Shortcut for [-u auto-decimal-bytes] -b Shortcut for [-u auto-binary-bits] -B Shortcut for [-u auto-binary-bytes] --selection-details Show server selection details --ca-certificate=ARG CA Certificate bundle path -v Logging verbosity.</description>
    </item>
    
  </channel>
</rss>
